# StreetMarket E-commerce Marketplace - Complete Blueprint (à¸à¸´à¸¡à¸à¹Œà¹€à¸‚à¸µà¸¢à¸§à¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ)

**à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸„à¸·à¸­à¸à¸´à¸¡à¸à¹Œà¹€à¸‚à¸µà¸¢à¸§à¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œà¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸£à¹‰à¸²à¸‡ StreetMarket E-commerce Marketplace à¸ˆà¸²à¸ 0 à¸–à¸¶à¸‡ 100%**

---

## ğŸ“‹ à¸ªà¸²à¸£à¸šà¸±à¸

1. [à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š](#à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š)
2. [à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”](#à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”)
3. [Database Schema à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”](#database-schema-à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”)
4. [Backend API à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”](#backend-api-à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”)
5. [Frontend Pages à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”](#frontend-pages-à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”)
6. [UI Components à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”](#ui-components-à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”)
7. [User Flows à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”](#user-flows-à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”)
8. [Workflow à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡](#workflow-à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡)
9. [à¸à¸²à¸£à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²](#à¸à¸²à¸£à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²)

---

## à¸ à¸²à¸à¸£à¸§à¸¡à¸£à¸°à¸šà¸š

### à¸£à¸°à¸šà¸šà¸«à¸¥à¸±à¸ 7 à¸£à¸°à¸šà¸š

1. **à¸£à¸°à¸šà¸šà¸ªà¸¡à¸²à¸Šà¸´à¸ (User System)**
   - à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸ (OAuth)
   - à¸¢à¸·à¸™à¸¢à¸±à¸™à¸­à¸µà¹€à¸¡à¸¥
   - à¸ˆà¸±à¸”à¸à¸²à¸£à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
   - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹‚à¸¢à¸‡à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£
   - à¸­à¸±à¸à¹‚à¸«à¸¥à¸”à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™

2. **à¸£à¸°à¸šà¸š Seller**
   - à¸ªà¸¡à¸±à¸„à¸£à¹€à¸›à¹‡à¸™ Seller
   - à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜ Seller (Admin)
   - à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²
   - à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²
   - à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´à¸à¸²à¸£à¸‚à¸²à¸¢

3. **à¸£à¸°à¸šà¸šà¸ªà¸´à¸™à¸„à¹‰à¸² (Product System)**
   - à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸² (Categories)
   - à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸² (CRUD)
   - à¸„à¹‰à¸™à¸«à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²
   - à¸à¸£à¸­à¸‡à¹à¸¥à¸°à¹€à¸£à¸µà¸¢à¸‡à¸¥à¸³à¸”à¸±à¸š
   - à¸£à¸µà¸§à¸´à¸§à¹à¸¥à¸°à¸„à¸°à¹à¸™à¸™

4. **à¸£à¸°à¸šà¸šà¸à¸²à¸£à¹€à¸‡à¸´à¸™ (Payment System)**
   - à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹€à¸‡à¸´à¸™ (Wallet)
   - PromptPay QR Code
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
   - à¸à¸²à¸à¹€à¸‡à¸´à¸™ (Top-up)
   - à¸–à¸­à¸™à¹€à¸‡à¸´à¸™ (Withdrawal)
   - à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡ (Commission)

5. **à¸£à¸°à¸šà¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (Order System)**
   - à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸² (Cart)
   - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
   - à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
   - à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸–à¸²à¸™à¸°à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
   - à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸£à¸±à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²
   - à¸„à¸·à¸™à¹€à¸‡à¸´à¸™/à¸‚à¹‰à¸­à¸à¸´à¸à¸²à¸—

6. **à¸£à¸°à¸šà¸šà¹à¸Šà¸— (Chat System)**
   - à¹à¸Šà¸— Buyer-Seller
   - à¹à¸Šà¸— Support (Admin)
   - Real-time messaging (WebSocket)
   - à¸ªà¹ˆà¸‡à¸£à¸¹à¸›à¸ à¸²à¸à¹ƒà¸™à¹à¸Šà¸—
   - à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹à¸Šà¸—

7. **à¸£à¸°à¸šà¸šà¸à¸±à¸ªà¸”à¸¸ (Shipping System)**
   - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Flash Express
   - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Kerry Express
   - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ J&T Express
   - à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œà¹„à¸—à¸¢
   - à¸•à¸´à¸”à¸•à¸²à¸¡à¸à¸±à¸ªà¸”à¸¸à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´

---

## à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

### à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§ (141 à¹„à¸Ÿà¸¥à¹Œ)

```
streetmarket/
â”œâ”€â”€ client/                          # Frontend (React + TypeScript)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.tsx                 # Entry point
â”‚       â”œâ”€â”€ App.tsx                  # Routes
â”‚       â”œâ”€â”€ index.css                # Global styles
â”‚       â”œâ”€â”€ const.ts                 # Constants
â”‚       â”‚
â”‚       â”œâ”€â”€ _core/
â”‚       â”‚   â””â”€â”€ hooks/
â”‚       â”‚       â””â”€â”€ useAuth.ts       # Auth hook
â”‚       â”‚
â”‚       â”œâ”€â”€ contexts/
â”‚       â”‚   â””â”€â”€ ThemeContext.tsx     # Theme provider
â”‚       â”‚
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â”œâ”€â”€ useComposition.ts
â”‚       â”‚   â”œâ”€â”€ useMobile.tsx
â”‚       â”‚   â””â”€â”€ usePersistFn.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ lib/
â”‚       â”‚   â”œâ”€â”€ trpc.ts              # tRPC client
â”‚       â”‚   â””â”€â”€ utils.ts             # Utilities
â”‚       â”‚
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ ErrorBoundary.tsx
â”‚       â”‚   â”œâ”€â”€ DashboardLayout.tsx
â”‚       â”‚   â”œâ”€â”€ DashboardLayoutSkeleton.tsx
â”‚       â”‚   â”œâ”€â”€ ImageUploader.tsx
â”‚       â”‚   â”œâ”€â”€ AIChatBox.tsx
â”‚       â”‚   â”œâ”€â”€ ManusDialog.tsx
â”‚       â”‚   â”œâ”€â”€ Map.tsx
â”‚       â”‚   â””â”€â”€ ui/                  # 63 shadcn/ui components
â”‚       â”‚       â”œâ”€â”€ accordion.tsx
â”‚       â”‚       â”œâ”€â”€ alert-dialog.tsx
â”‚       â”‚       â”œâ”€â”€ alert.tsx
â”‚       â”‚       â”œâ”€â”€ aspect-ratio.tsx
â”‚       â”‚       â”œâ”€â”€ avatar.tsx
â”‚       â”‚       â”œâ”€â”€ badge.tsx
â”‚       â”‚       â”œâ”€â”€ breadcrumb.tsx
â”‚       â”‚       â”œâ”€â”€ button-group.tsx
â”‚       â”‚       â”œâ”€â”€ button.tsx
â”‚       â”‚       â”œâ”€â”€ calendar.tsx
â”‚       â”‚       â”œâ”€â”€ card.tsx
â”‚       â”‚       â”œâ”€â”€ carousel.tsx
â”‚       â”‚       â”œâ”€â”€ chart.tsx
â”‚       â”‚       â”œâ”€â”€ checkbox.tsx
â”‚       â”‚       â”œâ”€â”€ collapsible.tsx
â”‚       â”‚       â”œâ”€â”€ command.tsx
â”‚       â”‚       â”œâ”€â”€ context-menu.tsx
â”‚       â”‚       â”œâ”€â”€ dialog.tsx
â”‚       â”‚       â”œâ”€â”€ drawer.tsx
â”‚       â”‚       â”œâ”€â”€ dropdown-menu.tsx
â”‚       â”‚       â”œâ”€â”€ empty.tsx
â”‚       â”‚       â”œâ”€â”€ field.tsx
â”‚       â”‚       â”œâ”€â”€ form.tsx
â”‚       â”‚       â”œâ”€â”€ hover-card.tsx
â”‚       â”‚       â”œâ”€â”€ input-group.tsx
â”‚       â”‚       â”œâ”€â”€ input-otp.tsx
â”‚       â”‚       â”œâ”€â”€ input.tsx
â”‚       â”‚       â”œâ”€â”€ item.tsx
â”‚       â”‚       â”œâ”€â”€ kbd.tsx
â”‚       â”‚       â”œâ”€â”€ label.tsx
â”‚       â”‚       â”œâ”€â”€ menubar.tsx
â”‚       â”‚       â”œâ”€â”€ navigation-menu.tsx
â”‚       â”‚       â”œâ”€â”€ pagination.tsx
â”‚       â”‚       â”œâ”€â”€ popover.tsx
â”‚       â”‚       â”œâ”€â”€ progress.tsx
â”‚       â”‚       â”œâ”€â”€ radio-group.tsx
â”‚       â”‚       â”œâ”€â”€ resizable.tsx
â”‚       â”‚       â”œâ”€â”€ scroll-area.tsx
â”‚       â”‚       â”œâ”€â”€ select.tsx
â”‚       â”‚       â”œâ”€â”€ separator.tsx
â”‚       â”‚       â”œâ”€â”€ sheet.tsx
â”‚       â”‚       â”œâ”€â”€ sidebar.tsx
â”‚       â”‚       â”œâ”€â”€ skeleton.tsx
â”‚       â”‚       â”œâ”€â”€ slider.tsx
â”‚       â”‚       â”œâ”€â”€ sonner.tsx
â”‚       â”‚       â”œâ”€â”€ spinner.tsx
â”‚       â”‚       â”œâ”€â”€ switch.tsx
â”‚       â”‚       â”œâ”€â”€ table.tsx
â”‚       â”‚       â”œâ”€â”€ tabs.tsx
â”‚       â”‚       â”œâ”€â”€ textarea.tsx
â”‚       â”‚       â”œâ”€â”€ toggle-group.tsx
â”‚       â”‚       â”œâ”€â”€ toggle.tsx
â”‚       â”‚       â””â”€â”€ tooltip.tsx
â”‚       â”‚
â”‚       â””â”€â”€ pages/
â”‚           â”œâ”€â”€ Home.tsx              # Landing page
â”‚           â”œâ”€â”€ Products.tsx          # Products list
â”‚           â”œâ”€â”€ ProductDetail.tsx     # Product detail
â”‚           â”œâ”€â”€ Cart.tsx              # Shopping cart
â”‚           â”œâ”€â”€ Checkout.tsx          # Checkout
â”‚           â”œâ”€â”€ Profile.tsx           # User profile
â”‚           â”œâ”€â”€ SellerDashboard.tsx   # Seller dashboard
â”‚           â”œâ”€â”€ AdminDashboard.tsx    # Admin dashboard
â”‚           â”œâ”€â”€ ComponentShowcase.tsx # UI showcase
â”‚           â””â”€â”€ NotFound.tsx          # 404 page
â”‚
â”œâ”€â”€ server/                          # Backend (Express + tRPC)
â”‚   â”œâ”€â”€ _core/                       # Framework (à¸­à¸¢à¹ˆà¸²à¹à¸à¹‰)
â”‚   â”‚   â”œâ”€â”€ context.ts
â”‚   â”‚   â”œâ”€â”€ cookies.ts
â”‚   â”‚   â”œâ”€â”€ dataApi.ts
â”‚   â”‚   â”œâ”€â”€ env.ts
â”‚   â”‚   â”œâ”€â”€ imageGeneration.ts
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ llm.ts
â”‚   â”‚   â”œâ”€â”€ map.ts
â”‚   â”‚   â”œâ”€â”€ notification.ts
â”‚   â”‚   â”œâ”€â”€ oauth.ts
â”‚   â”‚   â”œâ”€â”€ sdk.ts
â”‚   â”‚   â”œâ”€â”€ systemRouter.ts
â”‚   â”‚   â”œâ”€â”€ trpc.ts
â”‚   â”‚   â”œâ”€â”€ vite.ts
â”‚   â”‚   â”œâ”€â”€ voiceTranscription.ts
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â”œâ”€â”€ cookie.d.ts
â”‚   â”‚       â””â”€â”€ manusTypes.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ routers.ts                   # tRPC routers (56 endpoints)
â”‚   â”œâ”€â”€ db.ts                        # Database functions
â”‚   â”œâ”€â”€ image.ts                     # Image upload
â”‚   â”œâ”€â”€ promptpay.ts                 # PromptPay QR
â”‚   â””â”€â”€ storage.ts                   # S3 storage
â”‚
â”œâ”€â”€ drizzle/                         # Database
â”‚   â”œâ”€â”€ schema.ts                    # Schema (14 tables)
â”‚   â”œâ”€â”€ relations.ts                 # Relations
â”‚   â”œâ”€â”€ meta/                        # Migrations metadata
â”‚   â””â”€â”€ *.sql                        # Migration files
â”‚
â”œâ”€â”€ shared/                          # Shared code
â”‚   â”œâ”€â”€ const.ts
â”‚   â”œâ”€â”€ types.ts
â”‚   â””â”€â”€ _core/
â”‚       â””â”€â”€ errors.ts
â”‚
â”œâ”€â”€ patches/                         # Package patches
â”‚   â””â”€â”€ wouter@3.7.1.patch
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ vitest.config.ts
â”œâ”€â”€ drizzle.config.ts
â”œâ”€â”€ components.json
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierignore
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ todo.md
â”œâ”€â”€ HANDOVER.md
â”œâ”€â”€ PROJECT_SUMMARY.md
â”œâ”€â”€ COMPLETE_INVENTORY.md
â””â”€â”€ COMPLETE_BLUEPRINT.md (à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰)
```

### à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡ (28 à¹„à¸Ÿà¸¥à¹Œ)

```
streetmarket/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ email.ts                     # Email system
â”‚   â”œâ”€â”€ payment-verification.ts     # Payment verification
â”‚   â”œâ”€â”€ chat-socket.ts               # WebSocket chat
â”‚   â”œâ”€â”€ seed.ts                      # Database seeding
â”‚   â”‚
â”‚   â”œâ”€â”€ shipping/
â”‚   â”‚   â”œâ”€â”€ index.ts                 # Unified shipping service
â”‚   â”‚   â”œâ”€â”€ flash.ts                 # Flash Express API
â”‚   â”‚   â”œâ”€â”€ kerry.ts                 # Kerry Express API
â”‚   â”‚   â”œâ”€â”€ jt.ts                    # J&T Express API
â”‚   â”‚   â””â”€â”€ thaipost.ts              # Thailand Post API
â”‚   â”‚
â”‚   â””â”€â”€ templates/                   # Email templates
â”‚       â”œâ”€â”€ welcome.html
â”‚       â”œâ”€â”€ email-verification.html
â”‚       â”œâ”€â”€ order-confirmation.html
â”‚       â”œâ”€â”€ payment-received.html
â”‚       â”œâ”€â”€ shipping-update.html
â”‚       â”œâ”€â”€ seller-approved.html
â”‚       â””â”€â”€ seller-rejected.html
â”‚
â”œâ”€â”€ client/src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Chat.tsx                 # Chat page
â”‚   â”‚   â”œâ”€â”€ Orders.tsx               # Order history
â”‚   â”‚   â””â”€â”€ SellerApplication.tsx    # Seller application form
â”‚   â”‚
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ MultipleImagesUploader.tsx
â”‚       â”œâ”€â”€ ChatList.tsx
â”‚       â”œâ”€â”€ ChatWindow.tsx
â”‚       â”œâ”€â”€ MessageBubble.tsx
â”‚       â”œâ”€â”€ ChatInput.tsx
â”‚       â”œâ”€â”€ OrderCard.tsx
â”‚       â”œâ”€â”€ OrderStatusBadge.tsx
â”‚       â””â”€â”€ ShippingTracker.tsx
â”‚
â”œâ”€â”€ README.md                        # Project documentation
â”œâ”€â”€ TESTING.md                       # Test checklist
â””â”€â”€ BUGS.md                          # Bug tracking
```

---

## Database Schema à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”

### 1. users (à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰)

```typescript
{
  id: int (PK, auto_increment)
  openId: varchar(64) (unique, not null)    // Manus OAuth ID
  name: text
  email: varchar(320)
  loginMethod: varchar(64)
  role: enum('user', 'seller', 'admin')     // à¸šà¸—à¸šà¸²à¸—
  phone: varchar(20)
  profileImage: text                         // URL à¸£à¸¹à¸›à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
  walletBalance: int (default 0)            // à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™à¹ƒà¸™à¸à¸£à¸°à¹€à¸›à¹‹à¸² (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  bankName: varchar(100)                    // à¸˜à¸™à¸²à¸„à¸²à¸£
  bankAccountNumber: varchar(50)            // à¹€à¸¥à¸‚à¸šà¸±à¸à¸Šà¸µ
  bankAccountName: varchar(200)             // à¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ
  idCardImage: text                         // URL à¸£à¸¹à¸›à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™
  idCardNumber: varchar(20)                 // à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™
  emailVerified: boolean (default false)
  createdAt: timestamp
  updatedAt: timestamp
  lastSignedIn: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 user â†’ many products (seller)
- 1 user â†’ many orders (buyer)
- 1 user â†’ many cartItems
- 1 user â†’ many reviews
- 1 user â†’ many messages
- 1 user â†’ many transactions
- 1 user â†’ many wishlist
- 1 user â†’ 1 sellerApplication

### 2. categories (à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²)

```typescript
{
  id: int (PK, auto_increment)
  name: varchar(100) (not null)
  slug: varchar(100) (unique, not null)
  description: text
  image: text                               // URL à¸£à¸¹à¸›à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
  parentId: int (nullable)                  // FK â†’ categories.id (hierarchical)
  order: int (default 0)                    // à¸¥à¸³à¸”à¸±à¸šà¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 category â†’ many categories (children)
- 1 category â†’ many products

### 3. products (à¸ªà¸´à¸™à¸„à¹‰à¸²)

```typescript
{
  id: int (PK, auto_increment)
  sellerId: int (FK â†’ users.id, not null)
  categoryId: int (FK â†’ categories.id, not null)
  name: varchar(200) (not null)
  slug: varchar(200) (unique, not null)
  description: text
  price: int (not null)                     // à¸£à¸²à¸„à¸² (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  stock: int (default 0)                    // à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸•à¹‡à¸­à¸
  images: json                              // Array of image URLs
  status: enum('active', 'inactive', 'out_of_stock')
  views: int (default 0)                    // à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸”à¸¹
  sold: int (default 0)                     // à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸‚à¸²à¸¢à¹„à¸›à¹à¸¥à¹‰à¸§
  rating: decimal(3,2) (default 0.00)       // à¸„à¸°à¹à¸™à¸™à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ (0.00-5.00)
  reviewCount: int (default 0)              // à¸ˆà¸³à¸™à¸§à¸™à¸£à¸µà¸§à¸´à¸§
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 product â†’ 1 seller (user)
- 1 product â†’ 1 category
- 1 product â†’ many reviews
- 1 product â†’ many orderItems
- 1 product â†’ many cartItems
- 1 product â†’ many wishlist

### 4. reviews (à¸£à¸µà¸§à¸´à¸§à¸ªà¸´à¸™à¸„à¹‰à¸²)

```typescript
{
  id: int (PK, auto_increment)
  productId: int (FK â†’ products.id, not null)
  userId: int (FK â†’ users.id, not null)
  orderId: int (FK â†’ orders.id, not null)   // à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¸à¹ˆà¸­à¸™à¸–à¸¶à¸‡à¸£à¸µà¸§à¸´à¸§à¹„à¸”à¹‰
  rating: int (1-5, not null)
  comment: text
  images: json                              // Array of image URLs
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 review â†’ 1 product
- 1 review â†’ 1 user
- 1 review â†’ 1 order

### 5. orders (à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  orderNumber: varchar(50) (unique, not null) // à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (ORD-YYYYMMDD-XXXX)
  status: enum('pending', 'paid', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded')
  totalAmount: int (not null)               // à¸¢à¸­à¸”à¸£à¸§à¸¡ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  shippingFee: int (default 0)              // à¸„à¹ˆà¸²à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  commission: int (default 0)               // à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  shippingAddress: json                     // {name, phone, address, province, district, subdistrict, postalCode}
  shippingMethod: varchar(50)               // 'flash', 'kerry', 'jt', 'thaipost'
  trackingNumber: varchar(100)              // à¹€à¸¥à¸‚à¸à¸±à¸ªà¸”à¸¸
  notes: text                               // à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸
  paidAt: timestamp
  shippedAt: timestamp
  deliveredAt: timestamp
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 order â†’ 1 user (buyer)
- 1 order â†’ many orderItems
- 1 order â†’ many transactions
- 1 order â†’ many messages
- 1 order â†’ 1 dispute (optional)

### 6. orderItems (à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­)

```typescript
{
  id: int (PK, auto_increment)
  orderId: int (FK â†’ orders.id, not null)
  productId: int (FK â†’ products.id, not null)
  sellerId: int (FK â†’ users.id, not null)
  productName: varchar(200) (not null)      // à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹€à¸œà¸·à¹ˆà¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¸–à¸¹à¸à¸¥à¸š
  productImage: text                        // à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹€à¸œà¸·à¹ˆà¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¸–à¸¹à¸à¸¥à¸š
  price: int (not null)                     // à¸£à¸²à¸„à¸²à¸‚à¸“à¸°à¸‹à¸·à¹‰à¸­ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  quantity: int (not null)
  subtotal: int (not null)                  // price * quantity
  createdAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 orderItem â†’ 1 order
- 1 orderItem â†’ 1 product
- 1 orderItem â†’ 1 seller

### 7. transactions (à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸‡à¸´à¸™)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  type: enum('topup', 'payment', 'refund', 'withdrawal', 'commission')
  amount: int (not null)                    // à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  balanceBefore: int (not null)             // à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™à¸à¹ˆà¸­à¸™à¸—à¸³à¸£à¸²à¸¢à¸à¸²à¸£
  balanceAfter: int (not null)              // à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™à¸«à¸¥à¸±à¸‡à¸—à¸³à¸£à¸²à¸¢à¸à¸²à¸£
  orderId: int (FK â†’ orders.id, nullable)
  reference: varchar(100)                   // REF number à¸ªà¸³à¸«à¸£à¸±à¸š PromptPay
  status: enum('pending', 'completed', 'failed')
  description: text
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 transaction â†’ 1 user
- 1 transaction â†’ 1 order (optional)

### 8. cartItems (à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  productId: int (FK â†’ products.id, not null)
  quantity: int (default 1, not null)
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 cartItem â†’ 1 user
- 1 cartItem â†’ 1 product

### 9. messages (à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸Šà¸—)

```typescript
{
  id: int (PK, auto_increment)
  senderId: int (FK â†’ users.id, not null)
  receiverId: int (FK â†’ users.id, nullable) // null = support chat
  orderId: int (FK â†’ orders.id, nullable)   // à¹à¸Šà¸—à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
  message: text (not null)
  images: json                              // Array of image URLs
  isRead: boolean (default false)
  createdAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 message â†’ 1 sender (user)
- 1 message â†’ 1 receiver (user, optional)
- 1 message â†’ 1 order (optional)

### 10. disputes (à¸‚à¹‰à¸­à¸à¸´à¸à¸²à¸—)

```typescript
{
  id: int (PK, auto_increment)
  orderId: int (FK â†’ orders.id, not null, unique)
  userId: int (FK â†’ users.id, not null)
  reason: text (not null)
  images: json                              // Array of image URLs
  status: enum('pending', 'investigating', 'resolved', 'rejected')
  adminNote: text                           // à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ˆà¸²à¸ Admin
  resolvedBy: int (FK â†’ users.id, nullable) // Admin à¸—à¸µà¹ˆà¹à¸à¹‰à¹„à¸‚
  resolvedAt: timestamp
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 dispute â†’ 1 order
- 1 dispute â†’ 1 user (buyer)
- 1 dispute â†’ 1 admin (resolver, optional)

### 11. notifications (à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  type: enum('order', 'payment', 'shipping', 'message', 'review', 'seller', 'admin')
  title: varchar(200) (not null)
  message: text (not null)
  link: varchar(500)                        // URL à¸—à¸µà¹ˆà¸ˆà¸°à¹„à¸›à¹€à¸¡à¸·à¹ˆà¸­à¸„à¸¥à¸´à¸
  isRead: boolean (default false)
  createdAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 notification â†’ 1 user

### 12. wishlist (à¸£à¸²à¸¢à¸à¸²à¸£à¹‚à¸›à¸£à¸”)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  productId: int (FK â†’ products.id, not null)
  createdAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 wishlist â†’ 1 user
- 1 wishlist â†’ 1 product

### 13. sellerApplications (à¸„à¸³à¸‚à¸­à¹€à¸›à¹‡à¸™ Seller)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null, unique)
  shopName: varchar(200) (not null)
  shopDescription: text
  idCardImage: text (not null)              // URL à¸£à¸¹à¸›à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™
  status: enum('pending', 'approved', 'rejected')
  rejectionReason: text                     // à¹€à¸«à¸•à¸¸à¸œà¸¥à¸—à¸µà¹ˆà¸›à¸à¸´à¹€à¸ªà¸˜
  reviewedBy: int (FK â†’ users.id, nullable) // Admin à¸—à¸µà¹ˆà¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š
  reviewedAt: timestamp
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 sellerApplication â†’ 1 user
- 1 sellerApplication â†’ 1 admin (reviewer, optional)

### 14. withdrawalRequests (à¸„à¸³à¸‚à¸­à¸–à¸­à¸™à¹€à¸‡à¸´à¸™)

```typescript
{
  id: int (PK, auto_increment)
  userId: int (FK â†’ users.id, not null)
  amount: int (not null)                    // à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸—à¸µà¹ˆà¸‚à¸­à¸–à¸­à¸™ (à¸ªà¸•à¸²à¸‡à¸„à¹Œ)
  bankName: varchar(100) (not null)
  bankAccountNumber: varchar(50) (not null)
  bankAccountName: varchar(200) (not null)
  status: enum('pending', 'approved', 'rejected', 'completed')
  rejectionReason: text
  approvedBy: int (FK â†’ users.id, nullable) // Admin à¸—à¸µà¹ˆà¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
  approvedAt: timestamp
  completedAt: timestamp
  createdAt: timestamp
  updatedAt: timestamp
}
```

**à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ:**
- 1 withdrawalRequest â†’ 1 user (seller)
- 1 withdrawalRequest â†’ 1 admin (approver, optional)

---

## Backend API à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

### Auth (2 endpoints)

**1. auth.me**
```typescript
// Get current user
Query: publicProcedure
Input: none
Output: User | null
```

**2. auth.logout**
```typescript
// Logout
Mutation: publicProcedure
Input: none
Output: { success: boolean }
```

### User (8 endpoints)

**3. user.profile**
```typescript
// Get user profile
Query: protectedProcedure
Input: none
Output: User
```

**4. user.updateProfile**
```typescript
// Update profile
Mutation: protectedProcedure
Input: {
  name?: string
  phone?: string
  profileImage?: string
}
Output: User
```

**5. user.linkBankAccount**
```typescript
// Link bank account
Mutation: protectedProcedure
Input: {
  bankName: string
  bankAccountNumber: string
  bankAccountName: string
}
Output: User
```

**6. user.uploadIdCard**
```typescript
// Upload ID card
Mutation: protectedProcedure
Input: {
  idCardImage: string
  idCardNumber: string
}
Output: User
```

**7. user.wallet**
```typescript
// Get wallet balance
Query: protectedProcedure
Input: none
Output: {
  balance: number
  transactions: Transaction[]
}
```

**8. user.transactions**
```typescript
// Get transaction history
Query: protectedProcedure
Input: {
  limit?: number
  offset?: number
}
Output: Transaction[]
```

**9. user.verifyEmail**
```typescript
// Verify email (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  code: string
}
Output: { success: boolean }
```

**10. user.resendVerificationEmail**
```typescript
// Resend verification email (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: none
Output: { success: boolean }
```

### Seller (5 endpoints)

**11. seller.apply**
```typescript
// Apply as seller
Mutation: protectedProcedure
Input: {
  shopName: string
  shopDescription: string
  idCardImage: string
}
Output: SellerApplication
```

**12. seller.application**
```typescript
// Get application status
Query: protectedProcedure
Input: none
Output: SellerApplication | null
```

**13. seller.dashboard**
```typescript
// Get seller dashboard stats
Query: sellerProcedure
Input: none
Output: {
  totalSales: number
  totalOrders: number
  totalProducts: number
  recentOrders: Order[]
}
```

**14. seller.stats**
```typescript
// Get detailed seller stats (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: sellerProcedure
Input: {
  startDate?: Date
  endDate?: Date
}
Output: {
  salesByDate: { date: string, amount: number }[]
  topProducts: { product: Product, sales: number }[]
  ordersByStatus: { status: string, count: number }[]
}
```

**15. seller.updateShop**
```typescript
// Update shop info (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: sellerProcedure
Input: {
  shopName?: string
  shopDescription?: string
  shopLogo?: string
}
Output: User
```

### Categories (5 endpoints)

**16. categories.list**
```typescript
// List all categories
Query: publicProcedure
Input: none
Output: Category[]
```

**17. categories.tree**
```typescript
// Get category tree
Query: publicProcedure
Input: none
Output: CategoryTree[]
```

**18. categories.create**
```typescript
// Create category (Admin)
Mutation: adminProcedure
Input: {
  name: string
  slug: string
  description?: string
  image?: string
  parentId?: number
  order?: number
}
Output: Category
```

**19. categories.update**
```typescript
// Update category (Admin) (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: adminProcedure
Input: {
  id: number
  name?: string
  slug?: string
  description?: string
  image?: string
  parentId?: number
  order?: number
}
Output: Category
```

**20. categories.delete**
```typescript
// Delete category (Admin) (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: adminProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

### Products (10 endpoints)

**21. products.list**
```typescript
// List products
Query: publicProcedure
Input: {
  categoryId?: number
  search?: string
  minPrice?: number
  maxPrice?: number
  sortBy?: 'price' | 'rating' | 'sold' | 'createdAt'
  sortOrder?: 'asc' | 'desc'
  limit?: number
  offset?: number
}
Output: {
  products: Product[]
  total: number
}
```

**22. products.get**
```typescript
// Get product detail
Query: publicProcedure
Input: {
  id: number
}
Output: Product & {
  seller: User
  category: Category
  reviews: Review[]
}
```

**23. products.create**
```typescript
// Create product (Seller)
Mutation: sellerProcedure
Input: {
  name: string
  slug: string
  description: string
  price: number
  stock: number
  categoryId: number
  images: string[]
}
Output: Product
```

**24. products.update**
```typescript
// Update product (Seller)
Mutation: sellerProcedure
Input: {
  id: number
  name?: string
  slug?: string
  description?: string
  price?: number
  stock?: number
  categoryId?: number
  images?: string[]
  status?: 'active' | 'inactive'
}
Output: Product
```

**25. products.delete**
```typescript
// Delete product (Seller)
Mutation: sellerProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

**26. products.reviews**
```typescript
// Get product reviews
Query: publicProcedure
Input: {
  productId: number
  limit?: number
  offset?: number
}
Output: Review[]
```

**27. products.incrementViews**
```typescript
// Increment product views (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: publicProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

**28. products.search**
```typescript
// Advanced product search (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: publicProcedure
Input: {
  query: string
  filters: {
    categoryIds?: number[]
    minPrice?: number
    maxPrice?: number
    minRating?: number
    inStock?: boolean
  }
}
Output: Product[]
```

**29. products.related**
```typescript
// Get related products (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: publicProcedure
Input: {
  productId: number
  limit?: number
}
Output: Product[]
```

**30. products.trending**
```typescript
// Get trending products (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: publicProcedure
Input: {
  limit?: number
}
Output: Product[]
```

### Cart (5 endpoints)

**31. cart.list**
```typescript
// Get cart items
Query: protectedProcedure
Input: none
Output: CartItem[]
```

**32. cart.add**
```typescript
// Add to cart
Mutation: protectedProcedure
Input: {
  productId: number
  quantity: number
}
Output: CartItem
```

**33. cart.update**
```typescript
// Update quantity
Mutation: protectedProcedure
Input: {
  id: number
  quantity: number
}
Output: CartItem
```

**34. cart.remove**
```typescript
// Remove item
Mutation: protectedProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

**35. cart.clear**
```typescript
// Clear cart
Mutation: protectedProcedure
Input: none
Output: { success: boolean }
```

### Wishlist (3 endpoints)

**36. wishlist.list**
```typescript
// Get wishlist
Query: protectedProcedure
Input: none
Output: Wishlist[]
```

**37. wishlist.add**
```typescript
// Add to wishlist
Mutation: protectedProcedure
Input: {
  productId: number
}
Output: Wishlist
```

**38. wishlist.remove**
```typescript
// Remove from wishlist
Mutation: protectedProcedure
Input: {
  productId: number
}
Output: { success: boolean }
```

### Notifications (3 endpoints)

**39. notifications.list**
```typescript
// List notifications
Query: protectedProcedure
Input: {
  limit?: number
  offset?: number
}
Output: Notification[]
```

**40. notifications.markAllAsRead**
```typescript
// Mark all as read
Mutation: protectedProcedure
Input: none
Output: { success: boolean }
```

**41. notifications.markAsRead**
```typescript
// Mark as read (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

### Admin (10 endpoints)

**42. admin.sellerApplications**
```typescript
// List seller applications
Query: adminProcedure
Input: {
  status?: 'pending' | 'approved' | 'rejected'
}
Output: SellerApplication[]
```

**43. admin.approveSellerApplication**
```typescript
// Approve seller
Mutation: adminProcedure
Input: {
  id: number
}
Output: SellerApplication
```

**44. admin.rejectSellerApplication**
```typescript
// Reject seller
Mutation: adminProcedure
Input: {
  id: number
  reason: string
}
Output: SellerApplication
```

**45. admin.resolveDispute**
```typescript
// Resolve dispute
Mutation: adminProcedure
Input: {
  id: number
  resolution: 'refund' | 'reject'
  note: string
}
Output: Dispute
```

**46. admin.updateCommission**
```typescript
// Update commission rate
Mutation: adminProcedure
Input: {
  rate: number
}
Output: { success: boolean }
```

**47. admin.users**
```typescript
// List users (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: adminProcedure
Input: {
  role?: 'user' | 'seller' | 'admin'
  search?: string
  limit?: number
  offset?: number
}
Output: User[]
```

**48. admin.updateUserRole**
```typescript
// Update user role (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: adminProcedure
Input: {
  userId: number
  role: 'user' | 'seller' | 'admin'
}
Output: User
```

**49. admin.banUser**
```typescript
// Ban user (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: adminProcedure
Input: {
  userId: number
  reason: string
}
Output: { success: boolean }
```

**50. admin.dashboard**
```typescript
// Get admin dashboard stats (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: adminProcedure
Input: none
Output: {
  totalUsers: number
  totalSellers: number
  totalOrders: number
  totalRevenue: number
  pendingApplications: number
  pendingDisputes: number
  pendingWithdrawals: number
}
```

**51. admin.withdrawalRequests**
```typescript
// List withdrawal requests (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: adminProcedure
Input: {
  status?: 'pending' | 'approved' | 'rejected' | 'completed'
}
Output: WithdrawalRequest[]
```

### Payment (5 endpoints)

**52. payment.generateQR**
```typescript
// Generate PromptPay QR
Mutation: protectedProcedure
Input: {
  amount: number
}
Output: {
  qrCode: string
  reference: string
  expiresAt: Date
}
```

**53. payment.topup**
```typescript
// Top-up wallet
Mutation: protectedProcedure
Input: {
  amount: number
  reference: string
}
Output: Transaction
```

**54. payment.requestWithdrawal**
```typescript
// Request withdrawal (Seller)
Mutation: sellerProcedure
Input: {
  amount: number
}
Output: WithdrawalRequest
```

**55. payment.verifyPayment**
```typescript
// Verify payment (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  reference: string
}
Output: {
  verified: boolean
  amount: number
  paidAt: Date
}
```

**56. payment.webhook**
```typescript
// Payment webhook (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: publicProcedure
Input: {
  reference: string
  amount: number
  status: 'success' | 'failed'
  transactionId: string
}
Output: { success: boolean }
```

### Withdrawal (2 endpoints)

**57. withdrawal.sellerRequests**
```typescript
// List withdrawal requests (Admin)
Query: adminProcedure
Input: none
Output: WithdrawalRequest[]
```

**58. withdrawal.withdrawalHistory**
```typescript
// Get withdrawal history (Seller)
Query: sellerProcedure
Input: none
Output: WithdrawalRequest[]
```

### Orders (7 endpoints)

**59. orders.create**
```typescript
// Create order
Mutation: protectedProcedure
Input: {
  shippingAddress: {
    name: string
    phone: string
    address: string
    province: string
    district: string
    subdistrict: string
    postalCode: string
  }
  shippingMethod: 'flash' | 'kerry' | 'jt' | 'thaipost'
  notes?: string
}
Output: Order
```

**60. orders.list**
```typescript
// List orders
Query: protectedProcedure
Input: {
  role?: 'buyer' | 'seller'
  status?: string
  limit?: number
  offset?: number
}
Output: Order[]
```

**61. orders.get**
```typescript
// Get order detail
Query: protectedProcedure
Input: {
  id: number
}
Output: Order & {
  items: OrderItem[]
  buyer: User
}
```

**62. orders.updateStatus**
```typescript
// Update order status
Mutation: protectedProcedure
Input: {
  id: number
  status: string
  trackingNumber?: string
}
Output: Order
```

**63. orders.confirmDelivery**
```typescript
// Confirm delivery
Mutation: protectedProcedure
Input: {
  id: number
}
Output: Order
```

**64. orders.cancel**
```typescript
// Cancel order (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  id: number
  reason: string
}
Output: Order
```

**65. orders.requestRefund**
```typescript
// Request refund (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  id: number
  reason: string
  images?: string[]
}
Output: Dispute
```

### Reviews (4 endpoints)

**66. reviews.create**
```typescript
// Create review
Mutation: protectedProcedure
Input: {
  productId: number
  orderId: number
  rating: number
  comment: string
  images?: string[]
}
Output: Review
```

**67. reviews.get**
```typescript
// Get reviews
Query: publicProcedure
Input: {
  productId: number
  limit?: number
  offset?: number
}
Output: Review[]
```

**68. reviews.delete**
```typescript
// Delete review
Mutation: protectedProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

**69. reviews.update**
```typescript
// Update review (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  id: number
  rating?: number
  comment?: string
  images?: string[]
}
Output: Review
```

### Chat (6 endpoints)

**70. chat.getConversations**
```typescript
// Get conversation list
Query: protectedProcedure
Input: none
Output: Conversation[]
```

**71. chat.getMessages**
```typescript
// Get messages
Query: protectedProcedure
Input: {
  receiverId?: number
  orderId?: number
  limit?: number
  offset?: number
}
Output: Message[]
```

**72. chat.send**
```typescript
// Send message
Mutation: protectedProcedure
Input: {
  receiverId?: number
  orderId?: number
  message: string
  images?: string[]
}
Output: Message
```

**73. chat.getSupportMessages**
```typescript
// Get support messages
Query: protectedProcedure
Input: none
Output: Message[]
```

**74. chat.markAsRead**
```typescript
// Mark messages as read (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  conversationId: number
}
Output: { success: boolean }
```

**75. chat.deleteMessage**
```typescript
// Delete message (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Mutation: protectedProcedure
Input: {
  id: number
}
Output: { success: boolean }
```

### Disputes (3 endpoints)

**76. disputes.create**
```typescript
// Create dispute
Mutation: protectedProcedure
Input: {
  orderId: number
  reason: string
  images?: string[]
}
Output: Dispute
```

**77. disputes.list**
```typescript
// List disputes
Query: protectedProcedure
Input: {
  status?: string
}
Output: Dispute[]
```

**78. disputes.get**
```typescript
// Get dispute detail (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)
Query: protectedProcedure
Input: {
  id: number
}
Output: Dispute & {
  order: Order
  user: User
}
```

### Image (3 endpoints)

**79. image.upload**
```typescript
// Upload single image
Mutation: protectedProcedure
Input: {
  base64: string
  filename: string
}
Output: {
  url: string
  thumbnail: string
}
```

**80. image.uploadMultiple**
```typescript
// Upload multiple images
Mutation: protectedProcedure
Input: {
  images: { base64: string, filename: string }[]
}
Output: {
  urls: string[]
  thumbnails: string[]
}
```

**81. image.delete**
```typescript
// Delete image
Mutation: protectedProcedure
Input: {
  url: string
}
Output: { success: boolean }
```

### Shipping (5 endpoints - à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡)

**82. shipping.calculateFee**
```typescript
// Calculate shipping fee
Query: publicProcedure
Input: {
  method: 'flash' | 'kerry' | 'jt' | 'thaipost'
  weight: number
  from: string // postal code
  to: string   // postal code
}
Output: {
  fee: number
  estimatedDays: number
}
```

**83. shipping.createShipment**
```typescript
// Create shipment
Mutation: sellerProcedure
Input: {
  orderId: number
  method: 'flash' | 'kerry' | 'jt' | 'thaipost'
}
Output: {
  trackingNumber: string
  label: string // PDF URL
}
```

**84. shipping.trackShipment**
```typescript
// Track shipment
Query: publicProcedure
Input: {
  trackingNumber: string
  method: 'flash' | 'kerry' | 'jt' | 'thaipost'
}
Output: {
  status: string
  location: string
  history: { date: Date, status: string, location: string }[]
}
```

**85. shipping.updateTracking**
```typescript
// Update tracking (Cron Job)
Mutation: protectedProcedure
Input: {
  orderId: number
}
Output: { success: boolean }
```

**86. shipping.webhook**
```typescript
// Shipping webhook
Mutation: publicProcedure
Input: {
  trackingNumber: string
  status: string
  location: string
}
Output: { success: boolean }
```

---

## Frontend Pages à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

### 1. Home.tsx (Landing Page)

**URL:** `/`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Login/Profile]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Hero Section                                       â”‚
â”‚  à¸•à¸¥à¸²à¸”à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œà¸—à¸µà¹ˆà¸”à¸µà¸—à¸µà¹ˆà¸ªà¸¸à¸” à¸‹à¸·à¹‰à¸­à¸‚à¸²à¸¢à¸‡à¹ˆà¸²à¸¢ à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ  â”‚
â”‚  [à¹€à¸£à¸´à¹ˆà¸¡à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡] [à¹€à¸›à¸´à¸”à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²]                        â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Features Section                                   â”‚
â”‚  [à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ 100%] [à¸£à¸§à¸”à¹€à¸£à¹‡à¸§à¸—à¸±à¸™à¹ƒà¸ˆ] [à¸Šà¸¸à¸¡à¸Šà¸™à¸„à¸™à¸£à¸¸à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆ]     â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸ªà¸´à¸™à¸„à¹‰à¸²à¹à¸™à¸°à¸™à¸³                                        â”‚
â”‚  [Product 1] [Product 2] [Product 3] [Product 4]   â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸à¸£à¹‰à¸­à¸¡à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡?                          â”‚
â”‚  [à¹€à¸£à¸´à¹ˆà¸¡à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡à¹€à¸¥à¸¢]                                  â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Footer                                              â”‚
â”‚ à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹€à¸£à¸² | à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸‹à¸·à¹‰à¸­ | à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­ | à¸™à¹‚à¸¢à¸šà¸²à¸¢     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Hero Section
- Features Section
- Product Grid (Trending Products)
- CTA Section
- Footer

**API Calls:**
- `products.trending` (à¹à¸ªà¸”à¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²à¸¢à¸­à¸”à¸™à¸´à¸¢à¸¡)

**State:**
- None (Static page)

**Interactions:**
- à¸„à¸¥à¸´à¸ "à¹€à¸£à¸´à¹ˆà¸¡à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡" â†’ Navigate to `/products`
- à¸„à¸¥à¸´à¸ "à¹€à¸›à¸´à¸”à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²" â†’ Navigate to `/seller/apply`
- à¸„à¸¥à¸´à¸ Product Card â†’ Navigate to `/products/:id`

### 2. Products.tsx (Products List)

**URL:** `/products`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Filters  â”‚  [Grid View] [List View]                â”‚
â”‚          â”‚                                          â”‚
â”‚ à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  â”‚  à¹€à¸£à¸µà¸¢à¸‡à¸•à¸²à¸¡: [à¸£à¸²à¸„à¸² â†“]                     â”‚
â”‚ â–¡ à¹€à¸ªà¸·à¹‰à¸­à¸œà¹‰à¸²â”‚                                          â”‚
â”‚ â–¡ à¸­à¸´à¹€à¸¥à¹‡à¸  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â–¡ à¸­à¸²à¸«à¸²à¸£   â”‚  â”‚ Prod â”‚ â”‚ Prod â”‚ â”‚ Prod â”‚ â”‚ Prod â”‚  â”‚
â”‚          â”‚  â”‚   1  â”‚ â”‚   2  â”‚ â”‚   3  â”‚ â”‚   4  â”‚  â”‚
â”‚ à¸£à¸²à¸„à¸²      â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ [0-1000] â”‚                                          â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ à¸„à¸°à¹à¸™à¸™     â”‚  â”‚ Prod â”‚ â”‚ Prod â”‚ â”‚ Prod â”‚ â”‚ Prod â”‚  â”‚
â”‚ â˜…â˜…â˜…â˜…â˜…     â”‚  â”‚   5  â”‚ â”‚   6  â”‚ â”‚   7  â”‚ â”‚   8  â”‚  â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  [< Prev] [1] [2] [3] [Next >]          â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Sidebar Filters
  - Category Filter (Checkbox list)
  - Price Range Slider
  - Rating Filter
- Product Grid/List
  - Product Card
    - Image
    - Name
    - Price
    - Rating
    - Sold count
    - [Add to Cart] button
    - [Wishlist] button
- Sort Dropdown
- Pagination

**API Calls:**
- `products.list` (with filters)
- `categories.list`
- `cart.add`
- `wishlist.add`

**State:**
```typescript
{
  products: Product[]
  total: number
  filters: {
    categoryId?: number
    search?: string
    minPrice?: number
    maxPrice?: number
    minRating?: number
  }
  sortBy: 'price' | 'rating' | 'sold' | 'createdAt'
  sortOrder: 'asc' | 'desc'
  page: number
  limit: number
}
```

**Interactions:**
- à¹€à¸¥à¸·à¸­à¸ Category â†’ Update filters â†’ Fetch products
- à¸›à¸£à¸±à¸š Price Range â†’ Update filters â†’ Fetch products
- à¹€à¸¥à¸·à¸­à¸ Rating â†’ Update filters â†’ Fetch products
- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ Sort â†’ Update sort â†’ Fetch products
- à¸„à¸¥à¸´à¸ Product Card â†’ Navigate to `/products/:id`
- à¸„à¸¥à¸´à¸ Add to Cart â†’ Call `cart.add` â†’ Show toast
- à¸„à¸¥à¸´à¸ Wishlist â†’ Call `wishlist.add` â†’ Show toast
- à¸„à¸¥à¸´à¸ Pagination â†’ Update page â†’ Fetch products

### 3. ProductDetail.tsx (Product Detail)

**URL:** `/products/:id`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Product Name                    â”‚
â”‚  â”‚              â”‚  â˜…â˜…â˜…â˜…â˜… 4.8 (120 à¸£à¸µà¸§à¸´à¸§)            â”‚
â”‚  â”‚   Product    â”‚                                   â”‚
â”‚  â”‚    Image     â”‚  à¸¿1,299                           â”‚
â”‚  â”‚              â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  à¸ˆà¸³à¸™à¸§à¸™: [- 1 +]                  â”‚
â”‚  [Img1][Img2]...   [Add to Cart] [Buy Now]         â”‚
â”‚                    [â™¡ Wishlist]                     â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸ªà¸´à¸™à¸„à¹‰à¸²                                   â”‚
â”‚  Lorem ipsum dolor sit amet...                     â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²                                            â”‚
â”‚  [Logo] Shop Name                                   â”‚
â”‚  [Chat] [View Shop]                                â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸£à¸µà¸§à¸´à¸§ (120)                                        â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜…â˜…â˜…â˜…â˜… User Name - 2024-01-01              â”‚  â”‚
â”‚  â”‚ à¸ªà¸´à¸™à¸„à¹‰à¸²à¸”à¸µà¸¡à¸²à¸ à¸ªà¹ˆà¸‡à¹€à¸£à¹‡à¸§ à¹à¸™à¸°à¸™à¸³à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š            â”‚  â”‚
â”‚  â”‚ [Image 1] [Image 2]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  [Load More Reviews]                                â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡                                â”‚
â”‚  [Product 1] [Product 2] [Product 3] [Product 4]   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Product Image Gallery
  - Main Image
  - Thumbnail List
  - Zoom on hover
- Product Info
  - Name
  - Rating & Review Count
  - Price
  - Quantity Selector
  - Add to Cart Button
  - Buy Now Button
  - Wishlist Button
- Product Description
- Seller Info Card
  - Shop Logo
  - Shop Name
  - Chat Button
  - View Shop Button
- Reviews Section
  - Review List
    - Review Card
      - Rating
      - User Name
      - Date
      - Comment
      - Images
  - Load More Button
- Related Products Grid

**API Calls:**
- `products.get` (with seller, category, reviews)
- `products.related`
- `products.incrementViews`
- `cart.add`
- `wishlist.add`
- `orders.create` (Buy Now)

**State:**
```typescript
{
  product: Product & {
    seller: User
    category: Category
    reviews: Review[]
  }
  quantity: number
  selectedImage: number
  relatedProducts: Product[]
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Thumbnail â†’ Update selectedImage
- à¸„à¸¥à¸´à¸ + â†’ Increase quantity
- à¸„à¸¥à¸´à¸ - â†’ Decrease quantity
- à¸„à¸¥à¸´à¸ Add to Cart â†’ Call `cart.add` â†’ Show toast
- à¸„à¸¥à¸´à¸ Buy Now â†’ Call `orders.create` â†’ Navigate to `/checkout`
- à¸„à¸¥à¸´à¸ Wishlist â†’ Call `wishlist.add` â†’ Show toast
- à¸„à¸¥à¸´à¸ Chat â†’ Navigate to `/chat?seller=:sellerId`
- à¸„à¸¥à¸´à¸ View Shop â†’ Navigate to `/shop/:sellerId`
- à¸„à¸¥à¸´à¸ Load More Reviews â†’ Fetch more reviews
- à¸„à¸¥à¸´à¸ Related Product â†’ Navigate to `/products/:id`

### 4. Cart.tsx (Shopping Cart)

**URL:** `/cart`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸² (3 à¸£à¸²à¸¢à¸à¸²à¸£)                            â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Img] Product Name 1                       â”‚  â”‚
â”‚  â”‚       à¸¿299 x [- 1 +] = à¸¿299                â”‚  â”‚
â”‚  â”‚       [Remove]                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Img] Product Name 2                       â”‚  â”‚
â”‚  â”‚       à¸¿599 x [- 2 +] = à¸¿1,198              â”‚  â”‚
â”‚  â”‚       [Remove]                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Img] Product Name 3                       â”‚  â”‚
â”‚  â”‚       à¸¿1,299 x [- 1 +] = à¸¿1,299            â”‚  â”‚
â”‚  â”‚       [Remove]                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ à¸ªà¸£à¸¸à¸›à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­                              â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¸¢à¸­à¸”à¸£à¸§à¸¡:              à¸¿2,796                â”‚  â”‚
â”‚  â”‚ à¸„à¹ˆà¸²à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡:           à¸¿50                   â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚ à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:          à¸¿2,846                â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ [Proceed to Checkout]                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Cart Items List
  - Cart Item Card
    - Product Image
    - Product Name
    - Price
    - Quantity Selector
    - Subtotal
    - Remove Button
- Order Summary Card
  - Subtotal
  - Shipping Fee
  - Total
  - Checkout Button

**API Calls:**
- `cart.list`
- `cart.update`
- `cart.remove`
- `cart.clear`

**State:**
```typescript
{
  cartItems: CartItem[]
  subtotal: number
  shippingFee: number
  total: number
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ + â†’ Call `cart.update` â†’ Update quantity
- à¸„à¸¥à¸´à¸ - â†’ Call `cart.update` â†’ Update quantity
- à¸„à¸¥à¸´à¸ Remove â†’ Call `cart.remove` â†’ Remove item
- à¸„à¸¥à¸´à¸ Proceed to Checkout â†’ Navigate to `/checkout`

### 5. Checkout.tsx (Checkout)

**URL:** `/checkout`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™                                           â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡                             â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥: [_________________]          â”‚  â”‚
â”‚  â”‚ à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£:     [_________________]          â”‚  â”‚
â”‚  â”‚ à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ:       [_________________]          â”‚  â”‚
â”‚  â”‚ à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”:      [â–¼ à¹€à¸¥à¸·à¸­à¸à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”]            â”‚  â”‚
â”‚  â”‚ à¹€à¸‚à¸•/à¸­à¸³à¹€à¸ à¸­:    [â–¼ à¹€à¸¥à¸·à¸­à¸à¹€à¸‚à¸•/à¸­à¸³à¹€à¸ à¸­]          â”‚  â”‚
â”‚  â”‚ à¹à¸‚à¸§à¸‡/à¸•à¸³à¸šà¸¥:    [â–¼ à¹€à¸¥à¸·à¸­à¸à¹à¸‚à¸§à¸‡/à¸•à¸³à¸šà¸¥]          â”‚  â”‚
â”‚  â”‚ à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ:  [_________________]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡                            â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ â—‹ Flash Express (à¸¿50) - 1-2 à¸§à¸±à¸™            â”‚  â”‚
â”‚  â”‚ â—‹ Kerry Express (à¸¿60) - 1-2 à¸§à¸±à¸™            â”‚  â”‚
â”‚  â”‚ â—‹ J&T Express (à¸¿45) - 2-3 à¸§à¸±à¸™              â”‚  â”‚
â”‚  â”‚ â—‹ à¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œà¹„à¸—à¸¢ (à¸¿40) - 3-5 à¸§à¸±à¸™              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™                          â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ â— à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹€à¸‡à¸´à¸™ (à¸¢à¸­à¸”à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­: à¸¿5,000)         â”‚  â”‚
â”‚  â”‚ â—‹ PromptPay QR Code                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ à¸ªà¸£à¸¸à¸›à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­                              â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¸ªà¸´à¸™à¸„à¹‰à¸² (3 à¸£à¸²à¸¢à¸à¸²à¸£):    à¸¿2,796               â”‚  â”‚
â”‚  â”‚ à¸„à¹ˆà¸²à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡:            à¸¿50                  â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚ à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:           à¸¿2,846               â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ [Place Order]                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Shipping Address Form
  - Name Input
  - Phone Input
  - Address Textarea
  - Province Select
  - District Select
  - Subdistrict Select
  - Postal Code Input
- Shipping Method Selector
  - Radio buttons for each method
  - Show fee and estimated days
- Payment Method Selector
  - Wallet (show balance)
  - PromptPay QR Code
- Order Summary Card
  - Items count
  - Subtotal
  - Shipping Fee
  - Total
  - Place Order Button

**API Calls:**
- `cart.list`
- `orders.create`
- `payment.generateQR` (if PromptPay selected)
- `shipping.calculateFee`

**State:**
```typescript
{
  shippingAddress: {
    name: string
    phone: string
    address: string
    province: string
    district: string
    subdistrict: string
    postalCode: string
  }
  shippingMethod: 'flash' | 'kerry' | 'jt' | 'thaipost'
  paymentMethod: 'wallet' | 'promptpay'
  shippingFee: number
  total: number
  qrCode?: string
  reference?: string
}
```

**Interactions:**
- à¹€à¸¥à¸·à¸­à¸ Province â†’ Load Districts
- à¹€à¸¥à¸·à¸­à¸ District â†’ Load Subdistricts
- à¹€à¸¥à¸·à¸­à¸ Shipping Method â†’ Call `shipping.calculateFee` â†’ Update shippingFee
- à¹€à¸¥à¸·à¸­à¸ Payment Method â†’ Show/Hide QR Code
- à¸„à¸¥à¸´à¸ Place Order â†’
  - If Wallet: Call `orders.create` â†’ Navigate to `/orders/:id`
  - If PromptPay: Call `payment.generateQR` â†’ Show QR Code â†’ Wait for payment â†’ Call `orders.create` â†’ Navigate to `/orders/:id`

### 6. Profile.tsx (User Profile)

**URL:** `/profile`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Sidebar  â”‚  à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ                                 â”‚
â”‚          â”‚                                          â”‚
â”‚ â–¡ à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚ â–¡ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­â”‚  â”‚ [Upload] â”‚                           â”‚
â”‚ â–¡ à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹€à¸‡à¸´à¸™â”‚  â”‚  Image   â”‚                           â”‚
â”‚ â–¡ à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚ â–¡ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²   â”‚                                          â”‚
â”‚ â–¡ à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šâ”‚  à¸Šà¸·à¹ˆà¸­:         [_________________]      â”‚
â”‚          â”‚  à¸­à¸µà¹€à¸¡à¸¥:        [_________________]      â”‚
â”‚          â”‚  à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£:      [_________________]      â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  [Save Changes]                          â”‚
â”‚          â”‚                                          â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¸šà¸±à¸à¸Šà¸µà¸˜à¸™à¸²à¸„à¸²à¸£                             â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¸˜à¸™à¸²à¸„à¸²à¸£:       [â–¼ à¹€à¸¥à¸·à¸­à¸à¸˜à¸™à¸²à¸„à¸²à¸£]          â”‚
â”‚          â”‚  à¹€à¸¥à¸‚à¸šà¸±à¸à¸Šà¸µ:      [_________________]      â”‚
â”‚          â”‚  à¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ:     [_________________]      â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  [Link Bank Account]                     â”‚
â”‚          â”‚                                          â”‚
â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™                             â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚          â”‚  â”‚ [Upload] â”‚                           â”‚
â”‚          â”‚  â”‚ ID Card  â”‚                           â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£:      [_________________]      â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  [Upload ID Card]                        â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Sidebar Menu
  - Profile
  - Orders
  - Wallet
  - Addresses
  - Settings
  - Logout
- Profile Section
  - Profile Image Uploader
  - Name Input
  - Email Input (readonly)
  - Phone Input
  - Save Button
- Bank Account Section
  - Bank Select
  - Account Number Input
  - Account Name Input
  - Link Button
- ID Card Section
  - ID Card Image Uploader
  - ID Card Number Input
  - Upload Button

**API Calls:**
- `user.profile`
- `user.updateProfile`
- `user.linkBankAccount`
- `user.uploadIdCard`
- `image.upload`

**State:**
```typescript
{
  user: User
  profileForm: {
    name: string
    phone: string
    profileImage: string
  }
  bankForm: {
    bankName: string
    bankAccountNumber: string
    bankAccountName: string
  }
  idCardForm: {
    idCardImage: string
    idCardNumber: string
  }
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Upload Image â†’ Open file picker â†’ Upload image â†’ Update profileImage
- à¹à¸à¹‰à¹„à¸‚ Name/Phone â†’ Update form
- à¸„à¸¥à¸´à¸ Save Changes â†’ Call `user.updateProfile` â†’ Show toast
- à¹€à¸¥à¸·à¸­à¸ Bank â†’ Update bankForm
- à¸à¸£à¸­à¸ Account Number/Name â†’ Update bankForm
- à¸„à¸¥à¸´à¸ Link Bank Account â†’ Call `user.linkBankAccount` â†’ Show toast
- à¸„à¸¥à¸´à¸ Upload ID Card â†’ Open file picker â†’ Upload image â†’ Update idCardImage
- à¸à¸£à¸­à¸ ID Card Number â†’ Update idCardForm
- à¸„à¸¥à¸´à¸ Upload ID Card â†’ Call `user.uploadIdCard` â†’ Show toast
- à¸„à¸¥à¸´à¸ Sidebar Menu â†’ Navigate to respective page

### 7. Orders.tsx (Order History) - à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡

**URL:** `/orders`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Sidebar  â”‚  à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸­à¸‡à¸‰à¸±à¸™                        â”‚
â”‚          â”‚                                          â”‚
â”‚ â–¡ à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ â”‚  [All] [Pending] [Paid] [Shipped] [Done]â”‚
â”‚ â–¡ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­â”‚                                          â”‚
â”‚ â–¡ à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹€à¸‡à¸´à¸™â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â–¡ à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ   â”‚  â”‚ Order #ORD-20240101-0001           â”‚â”‚
â”‚ â–¡ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²   â”‚  â”‚ 2024-01-01 10:00                   â”‚â”‚
â”‚ â–¡ à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šâ”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ [Img] Product Name 1 x 1       à¸¿299 â”‚â”‚
â”‚          â”‚  â”‚ [Img] Product Name 2 x 2     à¸¿1,198 â”‚â”‚
â”‚          â”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ à¸ªà¸–à¸²à¸™à¸°: [Shipped]                    â”‚â”‚
â”‚          â”‚  â”‚ à¸£à¸§à¸¡: à¸¿1,547                         â”‚â”‚
â”‚          â”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ [View Detail] [Track] [Contact]    â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚  â”‚ Order #ORD-20240102-0002           â”‚â”‚
â”‚          â”‚  â”‚ 2024-01-02 15:30                   â”‚â”‚
â”‚          â”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ [Img] Product Name 3 x 1     à¸¿1,299 â”‚â”‚
â”‚          â”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ à¸ªà¸–à¸²à¸™à¸°: [Delivered]                  â”‚â”‚
â”‚          â”‚  â”‚ à¸£à¸§à¸¡: à¸¿1,349                         â”‚â”‚
â”‚          â”‚  â”‚                                     â”‚â”‚
â”‚          â”‚  â”‚ [View Detail] [Review] [Buy Again] â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Sidebar Menu
- Status Filter Tabs
  - All
  - Pending
  - Paid
  - Shipped
  - Delivered
  - Cancelled
- Order List
  - Order Card
    - Order Number
    - Date
    - Product List (with images)
    - Status Badge
    - Total
    - Action Buttons
      - View Detail
      - Track (if shipped)
      - Contact Seller
      - Review (if delivered)
      - Buy Again
      - Cancel (if pending)
      - Confirm Delivery (if shipped)

**API Calls:**
- `orders.list`
- `orders.get`
- `orders.cancel`
- `orders.confirmDelivery`

**State:**
```typescript
{
  orders: Order[]
  statusFilter: 'all' | 'pending' | 'paid' | 'shipped' | 'delivered' | 'cancelled'
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Status Tab â†’ Update statusFilter â†’ Fetch orders
- à¸„à¸¥à¸´à¸ View Detail â†’ Navigate to `/orders/:id`
- à¸„à¸¥à¸´à¸ Track â†’ Navigate to `/orders/:id` (scroll to tracking)
- à¸„à¸¥à¸´à¸ Contact Seller â†’ Navigate to `/chat?order=:orderId`
- à¸„à¸¥à¸´à¸ Review â†’ Navigate to `/products/:productId` (scroll to review form)
- à¸„à¸¥à¸´à¸ Buy Again â†’ Add products to cart â†’ Navigate to `/cart`
- à¸„à¸¥à¸´à¸ Cancel â†’ Call `orders.cancel` â†’ Show confirmation dialog â†’ Update order
- à¸„à¸¥à¸´à¸ Confirm Delivery â†’ Call `orders.confirmDelivery` â†’ Show confirmation dialog â†’ Update order

### 8. SellerDashboard.tsx (Seller Dashboard)

**URL:** `/seller/dashboard`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Sidebar  â”‚  Seller Dashboard                        â”‚
â”‚          â”‚                                          â”‚
â”‚ â–¡ Dashboardâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â–¡ à¸ªà¸´à¸™à¸„à¹‰à¸²   â”‚  â”‚à¸¢à¸­à¸”à¸‚à¸²à¸¢â”‚ â”‚à¸„à¸³à¸ªà¸±à¹ˆà¸‡â”‚ â”‚à¸ªà¸´à¸™à¸„à¹‰à¸²â”‚ â”‚à¸£à¸µà¸§à¸´à¸§ â”‚ â”‚
â”‚ â–¡ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­â”‚  â”‚à¸¿12.5kâ”‚ â”‚  45  â”‚ â”‚  23  â”‚ â”‚ 4.8â˜…â”‚ â”‚
â”‚ â–¡ à¸£à¸²à¸¢à¹„à¸”à¹‰   â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â–¡ à¸–à¸­à¸™à¹€à¸‡à¸´à¸™  â”‚                                          â”‚
â”‚ â–¡ à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²   â”‚  à¸à¸£à¸²à¸Ÿà¸¢à¸­à¸”à¸‚à¸²à¸¢ (7 à¸§à¸±à¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”)              â”‚
â”‚ â–¡ à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚  â”‚ [Chart]                            â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸¥à¹ˆà¸²à¸ªà¸¸à¸”                        â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚  â”‚ #001 Product A  à¸¿299  [Pending]   â”‚â”‚
â”‚          â”‚  â”‚ #002 Product B  à¸¿599  [Paid]      â”‚â”‚
â”‚          â”‚  â”‚ #003 Product C  à¸¿1,299 [Shipped]  â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Sidebar Menu
  - Dashboard
  - Products
  - Orders
  - Revenue
  - Withdrawal
  - Shop Settings
  - Logout
- Stats Cards
  - Total Sales
  - Total Orders
  - Total Products
  - Average Rating
- Sales Chart
- Recent Orders Table

**API Calls:**
- `seller.dashboard`
- `seller.stats`
- `orders.list` (seller role)

**State:**
```typescript
{
  stats: {
    totalSales: number
    totalOrders: number
    totalProducts: number
    averageRating: number
  }
  salesChart: { date: string, amount: number }[]
  recentOrders: Order[]
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Sidebar Menu â†’ Navigate to respective page
- à¸„à¸¥à¸´à¸ Order â†’ Navigate to `/seller/orders/:id`

### 9. AdminDashboard.tsx (Admin Dashboard)

**URL:** `/admin/dashboard`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Sidebar  â”‚  Admin Dashboard                         â”‚
â”‚          â”‚                                          â”‚
â”‚ â–¡ Dashboardâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â–¡ à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰    â”‚  â”‚à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ â”‚ â”‚ Sellerâ”‚ â”‚à¸„à¸³à¸ªà¸±à¹ˆà¸‡â”‚ â”‚à¸£à¸²à¸¢à¹„à¸”à¹‰â”‚ â”‚
â”‚ â–¡ Seller  â”‚  â”‚ 1,234â”‚ â”‚  56  â”‚ â”‚  789 â”‚ â”‚à¸¿125k â”‚ â”‚
â”‚ â–¡ à¸ªà¸´à¸™à¸„à¹‰à¸²   â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â–¡ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­â”‚                                          â”‚
â”‚ â–¡ à¸‚à¹‰à¸­à¸à¸´à¸à¸²à¸— â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â–¡ à¸–à¸­à¸™à¹€à¸‡à¸´à¸™  â”‚  â”‚à¸£à¸­à¸•à¸£à¸§à¸ˆâ”‚ â”‚à¸‚à¹‰à¸­à¸à¸´à¸à¸²à¸—â”‚ â”‚à¸£à¸­à¸–à¸­à¸™â”‚          â”‚
â”‚ â–¡ à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  â”‚  â”‚  12  â”‚ â”‚   3  â”‚ â”‚   8  â”‚          â”‚
â”‚ â–¡ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²   â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚ â–¡ à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šâ”‚                                          â”‚
â”‚          â”‚  à¸à¸£à¸²à¸Ÿà¸£à¸²à¸¢à¹„à¸”à¹‰ (30 à¸§à¸±à¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”)               â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚  â”‚ [Chart]                            â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸¥à¹ˆà¸²à¸ªà¸¸à¸”                          â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚          â”‚  â”‚ User A à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸ - 5 à¸™à¸²à¸—à¸µà¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§  â”‚â”‚
â”‚          â”‚  â”‚ Seller B à¸¢à¸·à¹ˆà¸™à¸‚à¸­à¸ªà¸´à¸—à¸˜à¸´à¹Œ - 10 à¸™à¸²à¸—à¸µà¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§â”‚â”‚
â”‚          â”‚  â”‚ Order #123 à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡ - 15 à¸™à¸²à¸—à¸µà¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§ â”‚â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Sidebar Menu
  - Dashboard
  - Users
  - Sellers
  - Products
  - Orders
  - Disputes
  - Withdrawals
  - Categories
  - Settings
  - Logout
- Stats Cards
  - Total Users
  - Total Sellers
  - Total Orders
  - Total Revenue
  - Pending Applications
  - Pending Disputes
  - Pending Withdrawals
- Revenue Chart
- Recent Activities List

**API Calls:**
- `admin.dashboard`
- `admin.users`
- `admin.sellerApplications`
- `disputes.list`
- `withdrawal.sellerRequests`

**State:**
```typescript
{
  stats: {
    totalUsers: number
    totalSellers: number
    totalOrders: number
    totalRevenue: number
    pendingApplications: number
    pendingDisputes: number
    pendingWithdrawals: number
  }
  revenueChart: { date: string, amount: number }[]
  recentActivities: Activity[]
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Sidebar Menu â†’ Navigate to respective page
- à¸„à¸¥à¸´à¸ Stats Card â†’ Navigate to respective page with filter

### 10. Chat.tsx (Chat Page) - à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡

**URL:** `/chat`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                          â”‚
â”‚ Conver-  â”‚  Chat with Seller Name                   â”‚
â”‚ sations  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚          â”‚  â”‚                                    â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚ [Seller] à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸Šà¹ˆà¸§à¸¢â”‚ â”‚
â”‚ â”‚[Img] â”‚ â”‚  â”‚                            10:00  â”‚ â”‚
â”‚ â”‚Sellerâ”‚ â”‚  â”‚                                    â”‚ â”‚
â”‚ â”‚Name  â”‚ â”‚  â”‚ [You] à¸ªà¸´à¸™à¸„à¹‰à¸²à¸™à¸µà¹‰à¸¡à¸µà¸ªà¸µà¸­à¸·à¹ˆà¸™à¹„à¸«à¸¡à¸„à¸£à¸±à¸š    â”‚ â”‚
â”‚ â”‚Last  â”‚ â”‚  â”‚                            10:01  â”‚ â”‚
â”‚ â”‚msg...â”‚ â”‚  â”‚                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ [Seller] à¸¡à¸µà¸„à¸£à¸±à¸š à¸¡à¸µ 3 à¸ªà¸µ           â”‚ â”‚
â”‚          â”‚  â”‚                            10:02  â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚                                    â”‚ â”‚
â”‚ â”‚[Img] â”‚ â”‚  â”‚ [You] à¸‚à¸­à¸”à¸¹à¸£à¸¹à¸›à¸ªà¸µà¸­à¸·à¹ˆà¸™à¸«à¸™à¹ˆà¸­à¸¢à¸„à¸£à¸±à¸š      â”‚ â”‚
â”‚ â”‚Sellerâ”‚ â”‚  â”‚                            10:03  â”‚ â”‚
â”‚ â”‚Name2 â”‚ â”‚  â”‚                                    â”‚ â”‚
â”‚ â”‚Last  â”‚ â”‚  â”‚ [Seller] [Image]                  â”‚ â”‚
â”‚ â”‚msg...â”‚ â”‚  â”‚                            10:04  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                                    â”‚ â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                          â”‚
â”‚          â”‚  [Type a message...] [ğŸ“] [Send]        â”‚
â”‚          â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Conversation List (Sidebar)
  - Conversation Card
    - Avatar
    - Name
    - Last Message
    - Unread Badge
    - Timestamp
- Chat Window
  - Chat Header
    - Avatar
    - Name
    - Online Status
  - Message List
    - Message Bubble
      - Sender Name
      - Message Text
      - Images
      - Timestamp
  - Chat Input
    - Text Input
    - Attach Button
    - Send Button

**API Calls:**
- `chat.getConversations`
- `chat.getMessages`
- `chat.send`
- `chat.markAsRead`
- `image.upload`

**WebSocket Events:**
- `message:new` - New message received
- `message:read` - Message read
- `user:online` - User online
- `user:offline` - User offline
- `typing:start` - User typing
- `typing:stop` - User stopped typing

**State:**
```typescript
{
  conversations: Conversation[]
  selectedConversation: Conversation | null
  messages: Message[]
  newMessage: string
  isTyping: boolean
  onlineUsers: number[]
}
```

**Interactions:**
- à¸„à¸¥à¸´à¸ Conversation â†’ Load messages â†’ Update selectedConversation
- à¸à¸´à¸¡à¸à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ â†’ Update newMessage â†’ Emit `typing:start`
- à¸«à¸¢à¸¸à¸”à¸à¸´à¸¡à¸à¹Œ â†’ Emit `typing:stop`
- à¸„à¸¥à¸´à¸ Attach â†’ Open file picker â†’ Upload image â†’ Add to message
- à¸„à¸¥à¸´à¸ Send â†’ Call `chat.send` â†’ Emit `message:new` â†’ Clear input
- à¸£à¸±à¸š `message:new` â†’ Add message to list â†’ Play sound
- à¸£à¸±à¸š `typing:start` â†’ Show "typing..." indicator
- à¸£à¸±à¸š `typing:stop` â†’ Hide "typing..." indicator
- Scroll to bottom â†’ Call `chat.markAsRead`

### 11. SellerApplication.tsx (Seller Application Form) - à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡

**URL:** `/seller/apply`

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] à¸„à¹‰à¸™à¸«à¸²  à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ  [Cart] [Profile]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  à¸ªà¸¡à¸±à¸„à¸£à¹€à¸›à¹‡à¸™ Seller                                   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²                                â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™:       [_________________]         â”‚  â”‚
â”‚  â”‚ à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”:     [_________________]         â”‚  â”‚
â”‚  â”‚                 [_________________]         â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸£à¹‰à¸²à¸™                           â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™:                                â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚  â”‚
â”‚  â”‚ â”‚ [Upload] â”‚                                â”‚  â”‚
â”‚  â”‚ â”‚ ID Card  â”‚                                â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£:       [_________________]         â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¹à¸¥à¸°à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚                         â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ â˜‘ à¸‰à¸±à¸™à¸¢à¸­à¸¡à¸£à¸±à¸šà¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¹à¸¥à¸°à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚              â”‚  â”‚
â”‚  â”‚ â˜‘ à¸‰à¸±à¸™à¸£à¸±à¸šà¸—à¸£à¸²à¸šà¸™à¹‚à¸¢à¸šà¸²à¸¢à¸à¸²à¸£à¸‚à¸²à¸¢                    â”‚  â”‚
â”‚  â”‚                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  [Submit Application]                               â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Navigation Bar
- Shop Info Form
  - Shop Name Input
  - Shop Description Textarea
- Owner Info Form
  - ID Card Image Uploader
  - ID Card Number Input
- Terms & Conditions
  - Checkbox for Terms
  - Checkbox for Policy
- Submit Button

**API Calls:**
- `seller.apply`
- `image.upload`

**State:**
```typescript
{
  form: {
    shopName: string
    shopDescription: string
    idCardImage: string
    idCardNumber: string
  }
  acceptedTerms: boolean
  acceptedPolicy: boolean
}
```

**Interactions:**
- à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ â†’ Update form
- à¸„à¸¥à¸´à¸ Upload ID Card â†’ Open file picker â†’ Upload image â†’ Update idCardImage
- à¸„à¸¥à¸´à¸ Checkbox â†’ Toggle accepted
- à¸„à¸¥à¸´à¸ Submit â†’ Validate form â†’ Call `seller.apply` â†’ Navigate to `/seller/application-status`

---

## UI Components à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

### à¸—à¸µà¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§ (70 components)

1. **shadcn/ui Components (63 components)**
   - accordion, alert-dialog, alert, aspect-ratio, avatar, badge, breadcrumb, button-group, button, calendar, card, carousel, chart, checkbox, collapsible, command, context-menu, dialog, drawer, dropdown-menu, empty, field, form, hover-card, input-group, input-otp, input, item, kbd, label, menubar, navigation-menu, pagination, popover, progress, radio-group, resizable, scroll-area, select, separator, sheet, sidebar, skeleton, slider, sonner, spinner, switch, table, tabs, textarea, toggle-group, toggle, tooltip

2. **Custom Components (7 components)**
   - ErrorBoundary.tsx
   - DashboardLayout.tsx
   - DashboardLayoutSkeleton.tsx
   - ImageUploader.tsx
   - AIChatBox.tsx
   - ManusDialog.tsx
   - Map.tsx

### à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸à¸´à¹ˆà¸¡ (8 components)

1. **MultipleImagesUploader.tsx**
   - à¸­à¸±à¸à¹‚à¸«à¸¥à¸”à¸«à¸¥à¸²à¸¢à¸£à¸¹à¸› (max 10)
   - Drag & drop
   - Preview grid
   - Remove individual image
   - Progress bar

2. **ChatList.tsx**
   - à¸£à¸²à¸¢à¸à¸²à¸£ conversation
   - Search conversation
   - Filter (All, Unread)
   - Sort by latest message

3. **ChatWindow.tsx**
   - Chat header (avatar, name, status)
   - Message list
   - Auto scroll to bottom
   - Load more messages

4. **MessageBubble.tsx**
   - Sender/Receiver style
   - Text message
   - Image message
   - Timestamp
   - Read status

5. **ChatInput.tsx**
   - Text input with auto-resize
   - Attach button
   - Send button
   - Typing indicator
   - Emoji picker (optional)

6. **OrderCard.tsx**
   - Order number
   - Date
   - Product list
   - Status badge
   - Total
   - Action buttons

7. **OrderStatusBadge.tsx**
   - Color-coded status
   - Icon
   - Text

8. **ShippingTracker.tsx**
   - Timeline
   - Status list
   - Current location
   - Estimated delivery

---

## User Flows à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

### 1. User Registration & Login Flow

```
1. User visits website
   â†“
2. Click "Login" button
   â†“
3. Redirect to Manus OAuth
   â†“
4. User logs in with Manus account
   â†“
5. Redirect back to website with token
   â†“
6. Create user record in database
   â†“
7. Send welcome email
   â†“
8. Redirect to home page
```

**API Calls:**
- OAuth callback (automatic)
- `user.profile` (get user info)

**Email:**
- Welcome email

### 2. Email Verification Flow

```
1. User logs in for the first time
   â†“
2. System sends verification email
   â†“
3. User clicks verification link in email
   â†“
4. Redirect to website with verification code
   â†“
5. Call `user.verifyEmail` with code
   â†“
6. Update user.emailVerified = true
   â†“
7. Show success message
```

**API Calls:**
- `user.verifyEmail`

**Email:**
- Email verification email

### 3. Seller Application Flow

```
1. User clicks "à¹€à¸›à¸´à¸”à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²"
   â†“
2. Navigate to `/seller/apply`
   â†“
3. Fill shop info (name, description)
   â†“
4. Upload ID card image
   â†“
5. Enter ID card number
   â†“
6. Accept terms & conditions
   â†“
7. Click "Submit Application"
   â†“
8. Call `seller.apply`
   â†“
9. Create sellerApplication record
   â†“
10. Send notification to admin
   â†“
11. Navigate to `/seller/application-status`
   â†“
12. Show "à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´" message
```

**API Calls:**
- `seller.apply`
- `image.upload`

**Notifications:**
- Admin notification (new seller application)

### 4. Seller Approval Flow (Admin)

```
1. Admin logs in
   â†“
2. Navigate to `/admin/sellers`
   â†“
3. See list of pending applications
   â†“
4. Click application to view details
   â†“
5. Review shop info and ID card
   â†“
6. Decision:
   
   APPROVE:
   â”œâ”€ Click "Approve" button
   â”œâ”€ Call `admin.approveSellerApplication`
   â”œâ”€ Update user.role = 'seller'
   â”œâ”€ Update sellerApplication.status = 'approved'
   â”œâ”€ Send approval email to user
   â””â”€ Show success message
   
   REJECT:
   â”œâ”€ Click "Reject" button
   â”œâ”€ Enter rejection reason
   â”œâ”€ Call `admin.rejectSellerApplication`
   â”œâ”€ Update sellerApplication.status = 'rejected'
   â”œâ”€ Send rejection email to user
   â””â”€ Show success message
```

**API Calls:**
- `admin.sellerApplications`
- `admin.approveSellerApplication` or `admin.rejectSellerApplication`

**Email:**
- Seller approved email
- Seller rejected email

### 5. Product Creation Flow (Seller)

```
1. Seller logs in
   â†“
2. Navigate to `/seller/products`
   â†“
3. Click "à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²" button
   â†“
4. Fill product info:
   - Name
   - Description
   - Price
   - Stock
   - Category
   â†“
5. Upload product images (1-10 images)
   â†“
6. Click "Save" button
   â†“
7. Call `products.create`
   â†“
8. Create product record
   â†“
9. Show success message
   â†“
10. Navigate to `/seller/products`
```

**API Calls:**
- `products.create`
- `image.uploadMultiple`

### 6. Shopping Flow (Buyer)

```
1. User browses products
   â†“
2. Click product to view details
   â†“
3. Call `products.incrementViews`
   â†“
4. Select quantity
   â†“
5. Click "Add to Cart"
   â†“
6. Call `cart.add`
   â†“
7. Show success toast
   â†“
8. User continues shopping or goes to cart
   â†“
9. Navigate to `/cart`
   â†“
10. Review cart items
   â†“
11. Update quantities if needed
   â†“
12. Click "Proceed to Checkout"
   â†“
13. Navigate to `/checkout`
```

**API Calls:**
- `products.get`
- `products.incrementViews`
- `cart.add`
- `cart.list`
- `cart.update` (if quantity changed)

### 7. Checkout Flow (Buyer)

```
1. User at `/checkout`
   â†“
2. Fill shipping address
   â†“
3. Select shipping method
   â†“
4. Call `shipping.calculateFee`
   â†“
5. Update shipping fee
   â†“
6. Select payment method:
   
   WALLET:
   â”œâ”€ Check wallet balance
   â”œâ”€ If insufficient: Show error
   â”œâ”€ If sufficient: Continue
   
   PROMPTPAY:
   â”œâ”€ Call `payment.generateQR`
   â”œâ”€ Show QR code
   â”œâ”€ User scans and pays
   â”œâ”€ Wait for payment verification
   â””â”€ Continue when paid
   
7. Click "Place Order"
   â†“
8. Call `orders.create`
   â†“
9. Create order record
   â†“
10. Create orderItems records
   â†“
11. Deduct wallet balance (if wallet)
   â†“
12. Create transaction record
   â†“
13. Clear cart
   â†“
14. Send order confirmation email
   â†“
15. Send notification to seller
   â†“
16. Navigate to `/orders/:id`
```

**API Calls:**
- `shipping.calculateFee`
- `payment.generateQR` (if PromptPay)
- `orders.create`
- `cart.clear`

**Email:**
- Order confirmation email (buyer)
- New order notification email (seller)

### 8. Payment Verification Flow (PromptPay)

```
1. User scans QR code
   â†“
2. User pays via banking app
   â†“
3. Bank sends webhook to payment gateway
   â†“
4. Payment gateway sends webhook to our server
   â†“
5. Call `payment.webhook`
   â†“
6. Verify payment with reference number
   â†“
7. If verified:
   â”œâ”€ Update transaction status = 'completed'
   â”œâ”€ Update wallet balance
   â”œâ”€ Send payment received email
   â””â”€ Send notification to user
   â†“
8. If failed:
   â”œâ”€ Update transaction status = 'failed'
   â””â”€ Send payment failed email
```

**API Calls:**
- `payment.webhook`
- `payment.verifyPayment`

**Email:**
- Payment received email
- Payment failed email

### 9. Order Processing Flow (Seller)

```
1. Seller receives order notification
   â†“
2. Seller logs in
   â†“
3. Navigate to `/seller/orders`
   â†“
4. Click order to view details
   â†“
5. Verify payment status
   â†“
6. Prepare product
   â†“
7. Click "Mark as Processing"
   â†“
8. Call `orders.updateStatus` (status = 'processing')
   â†“
9. Send notification to buyer
   â†“
10. Pack product
   â†“
11. Select shipping method
   â†“
12. Call `shipping.createShipment`
   â†“
13. Get tracking number
   â†“
14. Click "Mark as Shipped"
   â†“
15. Call `orders.updateStatus` (status = 'shipped', trackingNumber)
   â†“
16. Send shipping update email to buyer
   â†“
17. Send notification to buyer
```

**API Calls:**
- `orders.updateStatus`
- `shipping.createShipment`

**Email:**
- Shipping update email

**Notifications:**
- Order processing notification
- Order shipped notification

### 10. Shipping Tracking Flow

```
1. Order status = 'shipped'
   â†“
2. Cron job runs every hour
   â†“
3. For each shipped order:
   â”œâ”€ Call `shipping.trackShipment`
   â”œâ”€ Get current status
   â”œâ”€ If status changed:
   â”‚  â”œâ”€ Call `orders.updateStatus`
   â”‚  â”œâ”€ Send notification to buyer
   â”‚  â””â”€ If delivered:
   â”‚     â”œâ”€ Update order status = 'delivered'
   â”‚     â”œâ”€ Transfer money to seller (minus commission)
   â”‚     â”œâ”€ Create transaction records
   â”‚     â””â”€ Send delivery confirmation email
   â””â”€ Continue
```

**API Calls:**
- `shipping.trackShipment`
- `orders.updateStatus`
- `shipping.updateTracking`

**Email:**
- Delivery confirmation email

**Notifications:**
- Shipping status update notification

### 11. Order Completion Flow (Buyer)

```
1. Buyer receives product
   â†“
2. Navigate to `/orders/:id`
   â†“
3. Click "Confirm Delivery"
   â†“
4. Call `orders.confirmDelivery`
   â†“
5. Update order status = 'delivered'
   â†“
6. Transfer money to seller (minus commission)
   â†“
7. Create transaction records
   â†“
8. Show success message
   â†“
9. Show "Write Review" button
   â†“
10. Click "Write Review"
   â†“
11. Navigate to product page (scroll to review form)
   â†“
12. Fill review (rating, comment, images)
   â†“
13. Click "Submit Review"
   â†“
14. Call `reviews.create`
   â†“
15. Create review record
   â†“
16. Update product rating and reviewCount
   â†“
17. Send notification to seller
   â†“
18. Show success message
```

**API Calls:**
- `orders.confirmDelivery`
- `reviews.create`

**Notifications:**
- New review notification (seller)

### 12. Withdrawal Flow (Seller)

```
1. Seller has wallet balance
   â†“
2. Navigate to `/seller/withdrawal`
   â†“
3. Enter withdrawal amount
   â†“
4. Verify bank account is linked
   â†“
5. Click "Request Withdrawal"
   â†“
6. Call `payment.requestWithdrawal`
   â†“
7. Create withdrawalRequest record
   â†“
8. Send notification to admin
   â†“
9. Show "à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´" message
   â†“
10. Admin reviews request
   â†“
11. Admin approves:
    â”œâ”€ Call `withdrawal.approve`
    â”œâ”€ Deduct wallet balance
    â”œâ”€ Create transaction record
    â”œâ”€ Update withdrawalRequest status = 'approved'
    â”œâ”€ Send approval email to seller
    â””â”€ Process bank transfer (manual)
    â†“
12. Admin marks as completed:
    â”œâ”€ Update withdrawalRequest status = 'completed'
    â””â”€ Send completion email to seller
```

**API Calls:**
- `payment.requestWithdrawal`
- `withdrawal.approve` (admin)
- `withdrawal.complete` (admin)

**Email:**
- Withdrawal approved email
- Withdrawal completed email

**Notifications:**
- Withdrawal request notification (admin)

### 13. Dispute Flow (Buyer)

```
1. Buyer has issue with order
   â†“
2. Navigate to `/orders/:id`
   â†“
3. Click "Report Problem"
   â†“
4. Fill dispute form:
   - Reason
   - Description
   - Images (optional)
   â†“
5. Click "Submit Dispute"
   â†“
6. Call `disputes.create`
   â†“
7. Create dispute record
   â†“
8. Send notification to admin
   â†“
9. Send notification to seller
   â†“
10. Show "à¸£à¸­à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š" message
   â†“
11. Admin reviews dispute
   â†“
12. Admin decision:
    
    REFUND:
    â”œâ”€ Call `admin.resolveDispute` (resolution = 'refund')
    â”œâ”€ Refund money to buyer
    â”œâ”€ Create transaction records
    â”œâ”€ Update dispute status = 'resolved'
    â”œâ”€ Send refund email to buyer
    â””â”€ Send notification to seller
    
    REJECT:
    â”œâ”€ Call `admin.resolveDispute` (resolution = 'reject')
    â”œâ”€ Update dispute status = 'rejected'
    â”œâ”€ Send rejection email to buyer
    â””â”€ Send notification to seller
```

**API Calls:**
- `disputes.create`
- `admin.resolveDispute`

**Email:**
- Dispute refund email
- Dispute rejection email

**Notifications:**
- Dispute created notification (admin, seller)
- Dispute resolved notification (buyer, seller)

### 14. Chat Flow (Buyer-Seller)

```
1. Buyer wants to ask about product
   â†“
2. Navigate to `/products/:id`
   â†“
3. Click "Chat" button
   â†“
4. Navigate to `/chat?seller=:sellerId&product=:productId`
   â†“
5. WebSocket connection established
   â†“
6. Load conversation
   â†“
7. Call `chat.getMessages`
   â†“
8. Display messages
   â†“
9. User types message
   â†“
10. Emit `typing:start` event
   â†“
11. Other user sees "typing..." indicator
   â†“
12. User stops typing
   â†“
13. Emit `typing:stop` event
   â†“
14. User clicks "Send"
   â†“
15. Call `chat.send`
   â†“
16. Create message record
   â†“
17. Emit `message:new` event
   â†“
18. Other user receives message
   â†“
19. Display message in chat window
   â†“
20. Play notification sound
   â†“
21. If other user is viewing chat:
    â”œâ”€ Call `chat.markAsRead`
    â””â”€ Emit `message:read` event
```

**API Calls:**
- `chat.getConversations`
- `chat.getMessages`
- `chat.send`
- `chat.markAsRead`

**WebSocket Events:**
- `typing:start`
- `typing:stop`
- `message:new`
- `message:read`

### 15. Admin User Management Flow

```
1. Admin logs in
   â†“
2. Navigate to `/admin/users`
   â†“
3. See list of users
   â†“
4. Search/Filter users
   â†“
5. Click user to view details
   â†“
6. Actions:
   
   CHANGE ROLE:
   â”œâ”€ Select new role (user/seller/admin)
   â”œâ”€ Click "Update Role"
   â”œâ”€ Call `admin.updateUserRole`
   â”œâ”€ Update user.role
   â””â”€ Show success message
   
   BAN USER:
   â”œâ”€ Click "Ban User"
   â”œâ”€ Enter ban reason
   â”œâ”€ Call `admin.banUser`
   â”œâ”€ Update user.status = 'banned'
   â”œâ”€ Send ban email to user
   â””â”€ Show success message
```

**API Calls:**
- `admin.users`
- `admin.updateUserRole`
- `admin.banUser`

**Email:**
- User banned email

---

## Workflow à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡

### Phase 1: Critical Infrastructure (2-3 hours)

#### 1.1 Email Notification System

**Step 1: Install Dependencies**
```bash
cd /home/ubuntu/streetmarket
pnpm add nodemailer
pnpm add -D @types/nodemailer
```

**Step 2: Create Email Service**
```typescript
// server/email.ts
import nodemailer from 'nodemailer';
import { ENV } from './_core/env';

// Create transporter (use Gmail, SendGrid, or AWS SES)
const transporter = nodemailer.createTransporter({
  host: ENV.SMTP_HOST,
  port: ENV.SMTP_PORT,
  secure: true,
  auth: {
    user: ENV.SMTP_USER,
    pass: ENV.SMTP_PASS,
  },
});

// Email templates
export async function sendWelcomeEmail(to: string, name: string) {
  const html = `...`; // Read from server/templates/welcome.html
  await transporter.sendMail({
    from: ENV.SMTP_FROM,
    to,
    subject: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆ StreetMarket',
    html,
  });
}

export async function sendEmailVerification(to: string, code: string) {
  const html = `...`; // Read from server/templates/email-verification.html
  await transporter.sendMail({
    from: ENV.SMTP_FROM,
    to,
    subject: 'à¸¢à¸·à¸™à¸¢à¸±à¸™à¸­à¸µà¹€à¸¡à¸¥à¸‚à¸­à¸‡à¸„à¸¸à¸“',
    html,
  });
}

// ... 5 more email functions
```

**Step 3: Create Email Templates**
```html
<!-- server/templates/welcome.html -->
<!DOCTYPE html>
<html>
<head>
  <style>
    /* Dark theme styles */
  </style>
</head>
<body>
  <h1>à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆ StreetMarket!</h1>
  <p>à¸ªà¸§à¸±à¸ªà¸”à¸µ {{name}},</p>
  <p>à¸‚à¸­à¸šà¸„à¸¸à¸“à¸—à¸µà¹ˆà¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸à¸à¸±à¸šà¹€à¸£à¸²</p>
  <a href="{{link}}">à¹€à¸£à¸´à¹ˆà¸¡à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡à¹€à¸¥à¸¢</a>
</body>
</html>
```

**Step 4: Integrate Email Sending**
```typescript
// server/routers.ts
import * as email from './email';

// In user.updateProfile mutation:
if (newUser && !existingUser) {
  await email.sendWelcomeEmail(user.email, user.name);
}

// In seller.apply mutation:
await email.sendSellerApplicationEmail(user.email, user.name);

// ... integrate in all relevant places
```

**Step 5: Add Environment Variables**
```
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM="StreetMarket <noreply@streetmarket.com>"
```

**Step 6: Test Email Sending**
```bash
# Create test script
cat > server/test-email.mjs << 'EOF'
import { sendWelcomeEmail } from './email.ts';
await sendWelcomeEmail('test@example.com', 'Test User');
console.log('Email sent!');
EOF

node server/test-email.mjs
```

#### 1.2 Payment Verification System

**Step 1: Choose Payment Gateway**
- Option 1: Omise (Thai payment gateway)
- Option 2: SCB Easy App (Direct bank integration)
- Option 3: 2C2P (Thai payment gateway)

**Step 2: Install SDK**
```bash
pnpm add omise
pnpm add -D @types/omise
```

**Step 3: Create Payment Verification Service**
```typescript
// server/payment-verification.ts
import Omise from 'omise';
import { ENV } from './_core/env';

const omise = Omise({
  publicKey: ENV.OMISE_PUBLIC_KEY,
  secretKey: ENV.OMISE_SECRET_KEY,
});

export async function verifyPromptPayPayment(reference: string) {
  // Query Omise API for payment status
  const charge = await omise.charges.retrieve(reference);
  
  return {
    verified: charge.status === 'successful',
    amount: charge.amount / 100, // Convert from satang to baht
    paidAt: new Date(charge.paid_at),
  };
}

export async function createPromptPayCharge(amount: number, reference: string) {
  const charge = await omise.charges.create({
    amount: amount * 100, // Convert to satang
    currency: 'THB',
    source: {
      type: 'promptpay',
    },
    metadata: {
      reference,
    },
  });
  
  return {
    chargeId: charge.id,
    qrCode: charge.source.scannable_code.image.download_uri,
  };
}
```

**Step 4: Create Webhook Endpoint**
```typescript
// server/routers.ts
payment: router({
  webhook: publicProcedure
    .input(z.object({
      event: z.string(),
      data: z.any(),
    }))
    .mutation(async ({ input }) => {
      if (input.event === 'charge.complete') {
        const reference = input.data.metadata.reference;
        const amount = input.data.amount / 100;
        
        // Find transaction by reference
        const transaction = await db.getTransactionByReference(reference);
        
        if (transaction) {
          // Update transaction status
          await db.updateTransaction(transaction.id, {
            status: 'completed',
          });
          
          // Update wallet balance
          await db.updateWalletBalance(transaction.userId, amount);
          
          // Send email
          await email.sendPaymentReceivedEmail(transaction.user.email, amount);
          
          // Send notification
          await db.createNotification({
            userId: transaction.userId,
            type: 'payment',
            title: 'à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ',
            message: `à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸šà¹€à¸‡à¸´à¸™ à¸¿${amount} à¹€à¸‚à¹‰à¸²à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹€à¸‡à¸´à¸™à¹à¸¥à¹‰à¸§`,
          });
        }
      }
      
      return { success: true };
    }),
}),
```

**Step 5: Update Payment Flow**
```typescript
// server/routers.ts
payment: router({
  generateQR: protectedProcedure
    .input(z.object({
      amount: z.number(),
    }))
    .mutation(async ({ ctx, input }) => {
      const reference = generateReference(); // ORD-YYYYMMDD-XXXX
      
      // Create charge via Omise
      const { chargeId, qrCode } = await createPromptPayCharge(
        input.amount,
        reference
      );
      
      // Create pending transaction
      await db.createTransaction({
        userId: ctx.user.id,
        type: 'topup',
        amount: input.amount,
        reference,
        status: 'pending',
      });
      
      return {
        qrCode,
        reference,
        expiresAt: new Date(Date.now() + 15 * 60 * 1000), // 15 minutes
      };
    }),
}),
```

**Step 6: Add Environment Variables**
```
OMISE_PUBLIC_KEY=pkey_test_xxxxx
OMISE_SECRET_KEY=skey_test_xxxxx
OMISE_WEBHOOK_SECRET=whsec_xxxxx
```

**Step 7: Test Payment Flow**
```bash
# Use Omise test mode
# Test QR code generation
# Test webhook receiving
```

#### 1.3 Security Implementation

**Step 1: Install Dependencies**
```bash
pnpm add express-rate-limit
pnpm add helmet
pnpm add cors
pnpm add express-validator
```

**Step 2: Add Rate Limiting**
```typescript
// server/_core/index.ts
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // limit each IP to 100 requests per windowMs
  message: 'Too many requests from this IP, please try again later.',
});

app.use('/api/', limiter);

// Stricter limit for auth endpoints
const authLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 5,
  message: 'Too many login attempts, please try again later.',
});

app.use('/api/oauth/', authLimiter);
```

**Step 3: Add Helmet (Security Headers)**
```typescript
// server/_core/index.ts
import helmet from 'helmet';

app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", "data:", "https:"],
    },
  },
}));
```

**Step 4: Add CORS**
```typescript
// server/_core/index.ts
import cors from 'cors';

app.use(cors({
  origin: ENV.FRONTEND_URL,
  credentials: true,
}));
```

**Step 5: Add Input Validation**
```typescript
// server/routers.ts
import { z } from 'zod';

// Example: Validate email
const emailSchema = z.string().email();

// Example: Validate phone
const phoneSchema = z.string().regex(/^[0-9]{10}$/);

// Example: Validate price
const priceSchema = z.number().positive().int();

// Use in procedures
user: router({
  updateProfile: protectedProcedure
    .input(z.object({
      name: z.string().min(1).max(100).optional(),
      phone: phoneSchema.optional(),
    }))
    .mutation(async ({ ctx, input }) => {
      // ...
    }),
}),
```

**Step 6: Add SQL Injection Protection**
```typescript
// Already protected by Drizzle ORM
// But add extra validation for raw queries

// BAD:
// const query = `SELECT * FROM users WHERE id = ${userId}`;

// GOOD:
// const user = await db.select().from(users).where(eq(users.id, userId));
```

**Step 7: Add XSS Protection**
```typescript
// Install DOMPurify for client-side
pnpm add dompurify
pnpm add -D @types/dompurify

// client/src/lib/sanitize.ts
import DOMPurify from 'dompurify';

export function sanitizeHTML(html: string) {
  return DOMPurify.sanitize(html);
}

// Use in components
<div dangerouslySetInnerHTML={{ __html: sanitizeHTML(product.description) }} />
```

### Phase 2: User Experience (3-4 hours)

#### 2.1 Real-time Chat System

**Step 1: Install Socket.IO**
```bash
pnpm add socket.io
pnpm add socket.io-client
pnpm add -D @types/socket.io
```

**Step 2: Create WebSocket Server**
```typescript
// server/chat-socket.ts
import { Server } from 'socket.io';
import type { Server as HTTPServer } from 'http';

export function initChatSocket(httpServer: HTTPServer) {
  const io = new Server(httpServer, {
    cors: {
      origin: process.env.FRONTEND_URL,
      credentials: true,
    },
  });
  
  // Authentication middleware
  io.use(async (socket, next) => {
    const token = socket.handshake.auth.token;
    // Verify token and attach user to socket
    const user = await verifyToken(token);
    if (user) {
      socket.data.user = user;
      next();
    } else {
      next(new Error('Authentication error'));
    }
  });
  
  io.on('connection', (socket) => {
    const user = socket.data.user;
    console.log(`User ${user.id} connected`);
    
    // Join user's room
    socket.join(`user:${user.id}`);
    
    // Handle typing events
    socket.on('typing:start', ({ receiverId }) => {
      io.to(`user:${receiverId}`).emit('typing:start', {
        userId: user.id,
        userName: user.name,
      });
    });
    
    socket.on('typing:stop', ({ receiverId }) => {
      io.to(`user:${receiverId}`).emit('typing:stop', {
        userId: user.id,
      });
    });
    
    // Handle new message
    socket.on('message:send', async ({ receiverId, message, images }) => {
      // Save message to database
      const newMessage = await db.createMessage({
        senderId: user.id,
        receiverId,
        message,
        images,
      });
      
      // Emit to receiver
      io.to(`user:${receiverId}`).emit('message:new', newMessage);
      
      // Emit back to sender (for confirmation)
      socket.emit('message:sent', newMessage);
    });
    
    // Handle message read
    socket.on('message:read', async ({ conversationId }) => {
      await db.markMessagesAsRead(user.id, conversationId);
      
      // Emit to sender
      io.to(`user:${conversationId}`).emit('messages:read', {
        userId: user.id,
      });
    });
    
    socket.on('disconnect', () => {
      console.log(`User ${user.id} disconnected`);
    });
  });
  
  return io;
}
```

**Step 3: Integrate WebSocket with Express**
```typescript
// server/_core/index.ts
import { createServer } from 'http';
import { initChatSocket } from '../chat-socket';

const httpServer = createServer(app);
const io = initChatSocket(httpServer);

// Start server
httpServer.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
```

**Step 4: Create Chat Components**

**ChatList.tsx**
```typescript
// client/src/components/ChatList.tsx
import { useState, useEffect } from 'react';
import { trpc } from '@/lib/trpc';
import { Avatar } from '@/components/ui/avatar';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';

export function ChatList({ onSelectConversation }) {
  const { data: conversations } = trpc.chat.getConversations.useQuery();
  const [search, setSearch] = useState('');
  
  const filtered = conversations?.filter(c =>
    c.name.toLowerCase().includes(search.toLowerCase())
  );
  
  return (
    <div className="flex flex-col h-full">
      <div className="p-4">
        <Input
          placeholder="à¸„à¹‰à¸™à¸«à¸²..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
        />


---

# PART 2: UI COMPONENTS BLUEPRINT

## 2.1 Design System

### Color Palette (Dark Theme)
```css
/* Primary Colors */
--primary-red: #FF3B3B        /* à¸›à¸¸à¹ˆà¸¡à¸«à¸¥à¸±à¸, CTA, à¸£à¸²à¸„à¸² */
--primary-green: #4ADE80      /* à¸ªà¸–à¸²à¸™à¸°à¸ªà¸³à¹€à¸£à¹‡à¸ˆ, à¸¢à¸­à¸”à¸‚à¸²à¸¢ */
--primary-orange: #FB923C     /* Badges, Highlights */

/* Background */
--bg-dark: #0A0A0A           /* à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸«à¸¥à¸±à¸ */
--bg-card: #1A1A1A           /* Card background */
--bg-hover: #2A2A2A          /* Hover state */

/* Text */
--text-primary: #FFFFFF       /* à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸«à¸¥à¸±à¸ */
--text-secondary: #A0A0A0     /* à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸£à¸­à¸‡ */
--text-muted: #666666         /* à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸šà¸²à¸šà¸²à¸‡ */

/* Effects */
--neon-glow: 0 0 20px rgba(255,59,59,0.5)
--glass-blur: backdrop-filter: blur(10px)
```

### Typography
```css
/* Headings */
font-family: 'Bebas Neue', sans-serif
H1: 48px, bold, letter-spacing: 2px
H2: 36px, bold, letter-spacing: 1.5px
H3: 24px, bold, letter-spacing: 1px

/* Body */
font-family: 'Inter', sans-serif
Body: 16px, regular, line-height: 1.6
Small: 14px, regular
Tiny: 12px, regular
```

### Spacing System
```
xs: 4px
sm: 8px
md: 16px
lg: 24px
xl: 32px
2xl: 48px
3xl: 64px
```

---

## 2.2 Shared Components (client/src/components/)

### 2.2.1 Navigation Components

#### **Navbar.tsx**
```typescript
interface NavbarProps {
  user?: User | null
  cartCount: number
  onSearch: (query: string) => void
}

Features:
- Logo (à¸‹à¹‰à¸²à¸¢)
- Search Bar (à¸à¸¥à¸²à¸‡)
- Cart Icon + Badge (à¸‚à¸§à¸²)
- User Menu Dropdown (à¸‚à¸§à¸²à¸ªà¸¸à¸”)
- Mobile Hamburger Menu
- Sticky on scroll

States:
- isScrolled: boolean
- isMobileMenuOpen: boolean
- searchQuery: string
```

#### **Sidebar.tsx** (à¸ªà¸³à¸«à¸£à¸±à¸š Dashboard)
```typescript
interface SidebarProps {
  role: 'seller' | 'admin'
  activePage: string
}

Menu Items (Seller):
- Dashboard
- Products
- Orders
- Analytics
- Wallet
- Settings

Menu Items (Admin):
- Dashboard
- Users
- Sellers (Pending Approval)
- Products
- Orders
- Disputes
- Settings
```

#### **Footer.tsx**
```typescript
Sections:
- About Us
- Customer Service
- Seller Center
- Follow Us (Social Links)
- Payment Methods Icons
- Copyright

Links:
- Terms of Service
- Privacy Policy
- Return Policy
- Contact Us
```

---

### 2.2.2 Product Components

#### **ProductCard.tsx**
```typescript
interface ProductCardProps {
  product: Product
  onAddToCart: (id: number) => void
  onAddToWishlist: (id: number) => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Product Image â”‚ (hover: show quick view)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Product Name    â”‚
â”‚ â­â­â­â­â­ (4.5) â”‚
â”‚ à¸¿999  à¸¿1,299    â”‚ (price, original price)
â”‚ [Add to Cart]   â”‚
â”‚ â™¥ Wishlist      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Interactions:
- Click card â†’ Product Detail
- Click Add to Cart â†’ Add to cart + toast
- Click Wishlist â†’ Toggle wishlist + animation
- Hover â†’ Show quick actions
```

#### **ProductGrid.tsx**
```typescript
interface ProductGridProps {
  products: Product[]
  loading: boolean
  onLoadMore: () => void
}

Features:
- Responsive grid (1-4 columns)
- Skeleton loading
- Infinite scroll
- Empty state
```

#### **ProductFilter.tsx**
```typescript
interface ProductFilterProps {
  categories: Category[]
  priceRange: [number, number]
  onFilterChange: (filters: Filters) => void
}

Filters:
- Category (checkbox tree)
- Price Range (slider)
- Rating (stars)
- Condition (new/used)
- Shipping (free shipping)
- Sort by (price, rating, newest)

Mobile: Drawer from bottom
Desktop: Sidebar left
```

---

### 2.2.3 Cart Components

#### **CartItem.tsx**
```typescript
interface CartItemProps {
  item: CartItem
  onUpdateQuantity: (id: number, quantity: number) => void
  onRemove: (id: number) => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Image] Product Name             â”‚
â”‚         à¸¿999 x 2 = à¸¿1,998        â”‚
â”‚         [- 2 +] [Remove]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Interactions:
- Click +/- â†’ Update quantity
- Click Remove â†’ Confirm dialog â†’ Remove
- Click image/name â†’ Product detail
```

#### **CartSummary.tsx**
```typescript
interface CartSummaryProps {
  subtotal: number
  shipping: number
  total: number
  onCheckout: () => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Subtotal:  à¸¿1,998   â”‚
â”‚ Shipping:  à¸¿50      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ Total:     à¸¿2,048   â”‚
â”‚                     â”‚
â”‚ [Proceed to Checkout] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2.4 Order Components

#### **OrderCard.tsx**
```typescript
interface OrderCardProps {
  order: Order
  onViewDetail: (id: number) => void
  onTrackShipping: (trackingNumber: string) => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order #12345  |  2024-01-15         â”‚
â”‚ Status: [Shipped] ğŸšš                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ [Product Image] Product Name x2      â”‚
â”‚ [Product Image] Product Name x1      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Total: à¸¿2,048                        â”‚
â”‚ [Track Order] [View Detail]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status Colors:
- Pending: yellow
- Paid: blue
- Shipped: purple
- Delivered: green
- Cancelled: red
```

#### **OrderTimeline.tsx**
```typescript
interface OrderTimelineProps {
  events: OrderEvent[]
}

Layout (Vertical):
â— Order Placed        2024-01-15 10:00
â”‚
â— Payment Confirmed   2024-01-15 10:05
â”‚
â— Shipped             2024-01-16 14:30
â”‚
â—‹ Delivered           (Pending)
```

---

### 2.2.5 Form Components

#### **ImageUploader.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```typescript
interface ImageUploaderProps {
  onUpload: (url: string) => void
  maxSize?: number
  accept?: string[]
}

Features:
- Drag & drop zone
- Click to upload
- Image preview
- Progress bar
- Validation errors
- Remove button
```

#### **MultipleImagesUploader.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```typescript
interface MultipleImagesUploaderProps {
  onUpload: (urls: string[]) => void
  maxFiles?: number
  maxSize?: number
}

Features:
- Multiple file selection
- Drag & drop
- Preview grid
- Reorder images (drag)
- Remove individual
- Upload progress per file
```

#### **AddressForm.tsx**
```typescript
interface AddressFormProps {
  initialValue?: Address
  onSubmit: (address: Address) => void
}

Fields:
- Full Name *
- Phone Number *
- Address Line 1 *
- Address Line 2
- Province * (dropdown)
- District * (dropdown, filtered by province)
- Subdistrict * (dropdown, filtered by district)
- Postal Code * (auto-fill)
- Set as Default (checkbox)

Validation:
- Phone: 10 digits
- Postal Code: 5 digits
- All required fields
```

#### **BankAccountForm.tsx**
```typescript
interface BankAccountFormProps {
  onSubmit: (account: BankAccount) => void
}

Fields:
- Bank Name * (dropdown with logo)
- Account Number * (10-12 digits)
- Account Name * (auto-verify with bank API)
- Branch (optional)

Validation:
- Account number format
- Name verification
```

---

### 2.2.6 Chat Components (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)

#### **ChatList.tsx**
```typescript
interface ChatListProps {
  conversations: Conversation[]
  onSelectChat: (id: number) => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Search conversations     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Avatar] Seller Name        â”‚
â”‚          Last message...    â”‚
â”‚          2 min ago  â—       â”‚ (unread badge)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Avatar] Buyer Name         â”‚
â”‚          Last message...    â”‚
â”‚          1 hour ago         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
- Real-time updates
- Unread count
- Search filter
- Sort by recent
```

#### **ChatWindow.tsx**
```typescript
interface ChatWindowProps {
  conversationId: number
  messages: Message[]
  onSendMessage: (content: string, type: 'text' | 'image') => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Seller Name          ...  â”‚ (header)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  [Their message]            â”‚
â”‚              [My message]   â”‚
â”‚  [Their message]            â”‚
â”‚              [My message]   â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ [Type message...] [Send] â”‚ (input)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
- Auto-scroll to bottom
- Typing indicator
- Image preview
- Message timestamps
- Read receipts
```

#### **MessageBubble.tsx**
```typescript
interface MessageBubbleProps {
  message: Message
  isMine: boolean
}

Layout (Mine):
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Message textâ”‚
              â”‚ 10:30 AM âœ“âœ“â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layout (Theirs):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Message textâ”‚
â”‚ 10:30 AM    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Types:
- Text message
- Image message (with lightbox)
- System message (centered, gray)
```

---

### 2.2.7 Modal Components

#### **ConfirmDialog.tsx**
```typescript
interface ConfirmDialogProps {
  title: string
  message: string
  confirmText?: string
  cancelText?: string
  variant?: 'danger' | 'warning' | 'info'
  onConfirm: () => void
  onCancel: () => void
}

Usage:
- Delete product
- Cancel order
- Remove from cart
- Logout
```

#### **ProductQuickView.tsx**
```typescript
interface ProductQuickViewProps {
  productId: number
  onClose: () => void
  onAddToCart: () => void
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Images] â”‚ Product Name      â”‚
â”‚ Gallery  â”‚ â­â­â­â­â­ (4.5)  â”‚
â”‚          â”‚ à¸¿999  à¸¿1,299      â”‚
â”‚          â”‚ Description...    â”‚
â”‚          â”‚ [Add to Cart]     â”‚
â”‚          â”‚ [View Full Detail]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **ReviewModal.tsx**
```typescript
interface ReviewModalProps {
  productId: number
  orderId: number
  onSubmit: (review: Review) => void
}

Fields:
- Rating (1-5 stars) *
- Title
- Comment *
- Images (up to 5)
- Anonymous (checkbox)
```

---

### 2.2.8 Dashboard Components

#### **StatsCard.tsx**
```typescript
interface StatsCardProps {
  title: string
  value: string | number
  icon: ReactNode
  trend?: {
    value: number
    direction: 'up' | 'down'
  }
  color?: string
}

Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ Total Orders     â”‚
â”‚ 1,234               â”‚
â”‚ â†‘ 12% from last monthâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Variants:
- Total Sales (à¸¿)
- Total Orders (#)
- Total Products (#)
- Pending Orders (#)
```

#### **SalesChart.tsx**
```typescript
interface SalesChartProps {
  data: SalesData[]
  period: 'day' | 'week' | 'month' | 'year'
}

Chart Types:
- Line chart (sales over time)
- Bar chart (orders per day)
- Pie chart (category distribution)

Library: Recharts
```

#### **RecentOrders.tsx**
```typescript
interface RecentOrdersProps {
  orders: Order[]
  onViewAll: () => void
}

Table Columns:
- Order ID
- Customer
- Products
- Total
- Status
- Date
- Actions (View, Update Status)
```

---

### 2.2.9 Notification Components

#### **NotificationBell.tsx**
```typescript
interface NotificationBellProps {
  count: number
  notifications: Notification[]
  onMarkAsRead: (id: number) => void
  onMarkAllAsRead: () => void
}

Dropdown:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notifications (5)  Mark all â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— New order #12345          â”‚
â”‚   2 min ago                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— Payment received          â”‚
â”‚   10 min ago                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [View All]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Toast.tsx** (à¹ƒà¸Šà¹‰ sonner)
```typescript
Types:
- Success (green)
- Error (red)
- Warning (yellow)
- Info (blue)

Position: top-right
Duration: 3000ms
Dismissible: true
```

---

## 2.3 Page Layouts

### 2.3.1 Public Pages

#### **Home.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Sections:
1. Hero Section
   - Main heading
   - Subheading
   - CTA buttons (Shop Now, Become Seller)
   - Background gradient

2. Featured Categories
   - Category cards (6-8)
   - Icon + Name
   - Product count

3. Featured Products
   - Product grid (8-12 products)
   - "View All" button

4. How It Works
   - 3-4 steps
   - Icon + Title + Description

5. Stats Section
   - Total Products
   - Active Sellers
   - Happy Customers

6. CTA Section
   - "Start Selling Today"
   - Button â†’ Seller Application

7. Footer
```

#### **Products.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Filterâ”‚ [Search Results]        â”‚
â”‚      â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”â”‚
â”‚Cat 1 â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚â”‚
â”‚Cat 2 â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜â”‚
â”‚      â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”â”‚
â”‚Price â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚â”‚
â”‚[====]â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜â”‚
â”‚      â”‚ [Load More]             â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
- Filter sidebar (collapsible on mobile)
- Sort dropdown
- Grid/List view toggle
- Pagination or infinite scroll
```

#### **ProductDetail.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  Product Name         â”‚
â”‚ â”‚        â”‚  â­â­â­â­â­ (4.5 / 123)â”‚
â”‚ â”‚ Image  â”‚  à¸¿999  à¸¿1,299 (23% off)â”‚
â”‚ â”‚ Galleryâ”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Quantity: [- 1 +]    â”‚
â”‚ [Thumb]     [Add to Cart]        â”‚
â”‚ [Thumb]     [Buy Now]            â”‚
â”‚ [Thumb]     â™¥ Add to Wishlist    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Description                      â”‚
â”‚ Lorem ipsum...                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Seller Information               â”‚
â”‚ [Avatar] Seller Name             â”‚
â”‚ â­ 4.8 (500 reviews)             â”‚
â”‚ [Chat] [View Shop]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Reviews (123)                    â”‚
â”‚ â­â­â­â­â­ User1: Great product!  â”‚
â”‚ â­â­â­â­â˜† User2: Good quality    â”‚
â”‚ [Load More Reviews]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Related Products                 â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”        â”‚
â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚        â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Interactions:
- Click thumbnail â†’ Change main image
- Click main image â†’ Lightbox gallery
- +/- quantity â†’ Update quantity
- Add to Cart â†’ Add + Toast + Update cart count
- Buy Now â†’ Add to cart + Redirect to checkout
- Chat â†’ Open chat with seller
```

#### **Cart.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Shopping Cart (3 items)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âœ“] Select All       â”‚ Summary   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚           â”‚
â”‚ [âœ“] [Img] Product 1  â”‚ Subtotal: â”‚
â”‚     à¸¿999 x 2         â”‚ à¸¿1,998    â”‚
â”‚     [- 2 +] [Remove] â”‚           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ Shipping: â”‚
â”‚ [âœ“] [Img] Product 2  â”‚ à¸¿50       â”‚
â”‚     à¸¿50 x 1          â”‚           â”‚
â”‚     [- 1 +] [Remove] â”‚ Total:    â”‚
â”‚                      â”‚ à¸¿2,048    â”‚
â”‚                      â”‚           â”‚
â”‚                      â”‚ [Checkout]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
- Select individual items
- Select all checkbox
- Update quantity
- Remove items
- Apply coupon code
- Checkout selected items
```

#### **Checkout.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Checkout                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Shipping Address  â”‚ Summary   â”‚
â”‚ [Select Address]     â”‚           â”‚
â”‚ [+ Add New]          â”‚ Items (3) â”‚
â”‚                      â”‚ Product 1 â”‚
â”‚ 2. Shipping Method   â”‚ Product 2 â”‚
â”‚ â—‹ Standard (à¸¿50)     â”‚           â”‚
â”‚ â—‹ Express (à¸¿100)     â”‚ Subtotal: â”‚
â”‚                      â”‚ à¸¿1,998    â”‚
â”‚ 3. Payment Method    â”‚           â”‚
â”‚ â— Wallet (à¸¿5,000)    â”‚ Shipping: â”‚
â”‚ â—‹ PromptPay QR       â”‚ à¸¿50       â”‚
â”‚                      â”‚           â”‚
â”‚ [Place Order]        â”‚ Total:    â”‚
â”‚                      â”‚ à¸¿2,048    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Flow:
1. Select/Add shipping address
2. Select shipping method
3. Select payment method
4. Review order
5. Place order
6. If PromptPay â†’ Show QR code
7. Wait for payment confirmation
8. Redirect to order success page
```

---

### 2.3.2 User Pages

#### **Profile.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Tabs:
1. Account Information
   - Avatar upload
   - Name, Email (read-only)
   - Phone
   - [Save Changes]

2. Addresses
   - List of addresses
   - [+ Add New Address]
   - Edit/Delete buttons

3. Bank Accounts
   - List of bank accounts
   - [+ Add Bank Account]
   - Verify status
   - Delete button

4. Security
   - Change Password
   - Two-Factor Authentication
   - Login History

5. Wallet
   - Balance: à¸¿5,000
   - [Top Up]
   - Transaction History
```

#### **Orders.tsx** (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
```
Tabs:
- All
- Pending Payment
- To Ship
- Shipped
- Completed
- Cancelled

List:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order #12345  |  2024-01-15      â”‚
â”‚ Status: [Shipped] ğŸšš             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ [Img] Product Name x2            â”‚
â”‚ [Img] Product Name x1            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Total: à¸¿2,048                    â”‚
â”‚ [Track] [Review] [Buy Again]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Actions:
- Track Order â†’ Tracking page
- Review â†’ Review modal
- Buy Again â†’ Add to cart
- Cancel Order (if pending)
- Request Refund (if delivered < 7 days)
```

#### **OrderDetail.tsx** (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
```
Sections:
1. Order Header
   - Order #12345
   - Date: 2024-01-15
   - Status: Shipped

2. Timeline
   - Order Placed
   - Payment Confirmed
   - Shipped
   - Delivered

3. Shipping Information
   - Tracking Number
   - Carrier
   - Estimated Delivery

4. Shipping Address
   - Name
   - Phone
   - Address

5. Products
   - List of products
   - Quantity, Price

6. Payment Summary
   - Subtotal
   - Shipping
   - Total

7. Actions
   - [Contact Seller]
   - [Request Refund] (if eligible)
   - [Leave Review] (if delivered)
```

#### **Wishlist.tsx** (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ My Wishlist (12 items)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”        â”‚
â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚ â”‚ P â”‚        â”‚
â”‚ â”‚ â™¥ â”‚ â”‚ â™¥ â”‚ â”‚ â™¥ â”‚ â”‚ â™¥ â”‚        â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
- Remove from wishlist
- Add to cart
- Share wishlist
- Empty state
```

---

### 2.3.3 Seller Pages

#### **SellerDashboard.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Tabs:
1. Dashboard (Overview)
   - Stats cards (Sales, Orders, Products)
   - Sales chart
   - Recent orders table

2. Products
   - Product list table
   - [+ Add Product]
   - Edit/Delete actions
   - Stock status

3. Orders
   - Order list table
   - Filter by status
   - Update status
   - Print invoice

4. Analytics
   - Sales chart (daily/weekly/monthly)
   - Top products
   - Customer insights

5. Wallet
   - Balance
   - [Withdraw]
   - Transaction history

6. Settings
   - Shop information
   - Shipping settings
   - Return policy
```

#### **AddProduct.tsx** (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
```
Form:
1. Basic Information
   - Product Name *
   - Category * (dropdown with search)
   - Brand
   - Condition (new/used)

2. Description *
   - Rich text editor
   - Formatting tools

3. Images * (1-10)
   - Multiple upload
   - Drag to reorder
   - Set cover image

4. Pricing
   - Price *
   - Original Price (for discount)
   - Stock Quantity *
   - SKU

5. Shipping
   - Weight *
   - Dimensions (L x W x H)
   - Shipping From (province)

6. Variants (optional)
   - Size, Color, etc.
   - Price/Stock per variant

7. SEO (optional)
   - Meta Title
   - Meta Description
   - Keywords

[Save as Draft] [Publish]

Validation:
- All required fields
- At least 1 image
- Price > 0
- Stock >= 0
```

---

### 2.3.4 Admin Pages

#### **AdminDashboard.tsx** âœ… (à¸¡à¸µà¹à¸¥à¹‰à¸§)
```
Tabs:
1. Dashboard
   - Platform stats
   - Revenue chart
   - Recent activities

2. Users
   - User list table
   - Search/Filter
   - Ban/Unban
   - View details

3. Sellers
   - Pending applications
   - Approved sellers
   - Approve/Reject
   - View documents

4. Products
   - All products
   - Pending approval
   - Reported products
   - Approve/Reject/Delete

5. Orders
   - All orders
   - Filter by status
   - View details
   - Refund management

6. Disputes
   - Open disputes
   - Resolved disputes
   - Assign to admin
   - Add notes
   - Resolve

7. Settings
   - Platform settings
   - Commission rate
   - Shipping fees
   - Payment methods
```

#### **SellerApproval.tsx** (à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
```
Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pending Seller Applications (5)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Application #12345               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Name: John Doe                   â”‚
â”‚ Email: john@example.com          â”‚
â”‚ Phone: 0812345678                â”‚
â”‚ Shop Name: John's Shop           â”‚
â”‚                                  â”‚
â”‚ ID Card:                         â”‚
â”‚ [View Image]                     â”‚
â”‚                                  â”‚
â”‚ Bank Account:                    â”‚
â”‚ Bank: SCB                        â”‚
â”‚ Account: 123-456-7890            â”‚
â”‚ Name: John Doe                   â”‚
â”‚                                  â”‚
â”‚ Reason for Selling:              â”‚
â”‚ Lorem ipsum...                   â”‚
â”‚                                  â”‚
â”‚ [Approve] [Reject]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Actions:
- View ID card (lightbox)
- Verify bank account
- Approve â†’ Send email + Update status
- Reject â†’ Send email with reason
```

---

## 2.4 Mobile Responsive Breakpoints

```css
/* Mobile First Approach */

/* Mobile (default) */
@media (min-width: 0px) {
  - Single column
  - Hamburger menu
  - Bottom navigation
  - Full-width cards
}

/* Tablet */
@media (min-width: 768px) {
  - 2 columns
  - Sidebar menu
  - Larger cards
}

/* Desktop */
@media (min-width: 1024px) {
  - 3-4 columns
  - Full sidebar
  - Hover effects
}

/* Large Desktop */
@media (min-width: 1280px) {
  - Max-width container
  - More spacing
}
```

---

## 2.5 Animation & Transitions

### Micro-interactions
```css
/* Button Hover */
.button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255,59,59,0.3);
  transition: all 0.2s ease;
}

/* Card Hover */
.card:hover {
  transform: scale(1.02);
  transition: transform 0.3s ease;
}

/* Neon Glow */
.neon-text {
  text-shadow: 0 0 10px currentColor;
  animation: glow 2s ease-in-out infinite;
}

@keyframes glow {
  0%, 100% { text-shadow: 0 0 10px currentColor; }
  50% { text-shadow: 0 0 20px currentColor; }
}

/* Loading Spinner */
.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
```

### Page Transitions
```typescript
// Using Framer Motion
import { motion } from 'framer-motion'

const pageVariants = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -20 }
}

<motion.div
  variants={pageVariants}
  initial="initial"
  animate="animate"
  exit="exit"
  transition={{ duration: 0.3 }}
>
  {/* Page content */}
</motion.div>
```

---

## 2.6 Accessibility (A11y)

### WCAG 2.1 AA Compliance

```typescript
/* Keyboard Navigation */
- Tab order: logical flow
- Focus indicators: visible
- Skip links: "Skip to main content"
- Escape key: close modals

/* Screen Reader Support */
- Alt text for images
- ARIA labels for icons
- ARIA live regions for dynamic content
- Semantic HTML (header, nav, main, footer)

/* Color Contrast */
- Text: 4.5:1 ratio
- Large text: 3:1 ratio
- Interactive elements: 3:1 ratio

/* Form Accessibility */
- Label for every input
- Error messages: descriptive
- Required fields: indicated
- Focus on first error
```

---

# PART 3: WORKFLOW & DEVELOPMENT PROCESS

## 3.1 Development Workflow (Step-by-Step)

### Phase 1: Setup & Infrastructure âœ… (DONE)
```
âœ… 1.1 Project Initialization
   - Create project with webdev_init_project
   - Install dependencies
   - Setup environment variables

âœ… 1.2 Database Schema
   - Design 14 tables
   - Create drizzle/schema.ts
   - Run pnpm db:push

âœ… 1.3 Basic Backend
   - Setup tRPC routers
   - Create db helpers
   - Test API endpoints

âœ… 1.4 Basic Frontend
   - Setup React Router
   - Create page components
   - Setup Tailwind theme

âœ… 1.5 Image Upload System
   - Install Sharp
   - Create server/image.ts
   - Create ImageUploader components
   - Integrate with Profile & Seller Dashboard
```

### Phase 2: Email Notification System (NEXT)
```
âŒ 2.1 Setup Email Service
   Step 1: Choose provider (Resend recommended)
   Step 2: Get API key
   Step 3: Add to environment variables
   
   Code:
   ```bash
   cd /home/ubuntu/streetmarket
   pnpm add resend
   ```

âŒ 2.2 Create Email Templates
   Step 1: Create server/email/templates/
   Step 2: Create 7 HTML templates:
   
   Files to create:
   - server/email/templates/welcome.html
   - server/email/templates/email-verification.html
   - server/email/templates/order-confirmation.html
   - server/email/templates/payment-received.html
   - server/email/templates/order-shipped.html
   - server/email/templates/seller-approved.html
   - server/email/templates/seller-rejected.html

âŒ 2.3 Create Email Service
   File: server/email/index.ts
   
   Functions:
   - sendWelcomeEmail(user)
   - sendVerificationEmail(user, token)
   - sendOrderConfirmation(order)
   - sendPaymentReceived(order)
   - sendOrderShipped(order, tracking)
   - sendSellerApproved(seller)
   - sendSellerRejected(seller, reason)

âŒ 2.4 Integrate Email Triggers
   Locations:
   - server/routers.ts (auth.register) â†’ sendWelcomeEmail
   - server/routers.ts (orders.create) â†’ sendOrderConfirmation
   - server/routers.ts (payment.confirm) â†’ sendPaymentReceived
   - server/routers.ts (orders.updateStatus) â†’ sendOrderShipped
   - server/routers.ts (seller.approve) â†’ sendSellerApproved
   - server/routers.ts (seller.reject) â†’ sendSellerRejected

âŒ 2.5 Test Email System
   Test cases:
   - Register new user â†’ Receive welcome email
   - Create order â†’ Receive confirmation
   - Payment confirmed â†’ Receive payment email
   - Order shipped â†’ Receive tracking email
   - Seller approved â†’ Receive approval email
```

### Phase 3: Payment Verification System
```
âŒ 3.1 Research Payment Gateway
   Options:
   - Omise (recommended for Thailand)
   - SCB Easy App API
   - 2C2P
   - PayPal (international)

âŒ 3.2 Setup Payment Gateway
   Step 1: Register account
   Step 2: Get API keys (public + secret)
   Step 3: Add to environment variables
   
   Code:
   ```bash
   pnpm add omise
   ```

âŒ 3.3 Create Payment Service
   File: server/payment/index.ts
   
   Functions:
   - createPromptPayCharge(amount, ref)
   - verifyPayment(chargeId)
   - getPaymentStatus(chargeId)
   - createRefund(chargeId, amount)

âŒ 3.4 Integrate Payment Verification
   Flow:
   1. User creates order
   2. System generates PromptPay QR (with charge ID)
   3. User pays via banking app
   4. Webhook receives payment notification
   5. System verifies payment
   6. Update order status to "Paid"
   7. Send email confirmation

   Files to modify:
   - server/routers.ts (payment router)
   - server/_core/index.ts (add webhook endpoint)

âŒ 3.5 Create Webhook Endpoint
   File: server/_core/webhook.ts
   
   Endpoint: POST /api/webhook/payment
   
   Flow:
   1. Receive webhook from payment gateway
   2. Verify signature
   3. Extract payment data
   4. Update transaction status
   5. Update order status
   6. Send email notification

âŒ 3.6 Test Payment Flow
   Test cases:
   - Create order â†’ Generate QR
   - Simulate payment â†’ Webhook triggered
   - Verify order status updated
   - Verify email sent
```

### Phase 4: Security Implementation
```
âŒ 4.1 Rate Limiting
   Install:
   ```bash
   pnpm add express-rate-limit
   ```
   
   File: server/_core/rateLimiter.ts
   
   Limits:
   - API calls: 100 requests/15 minutes
   - Login attempts: 5 attempts/15 minutes
   - Image upload: 10 uploads/hour
   - Email sending: 10 emails/hour

âŒ 4.2 CSRF Protection
   Install:
   ```bash
   pnpm add csurf
   ```
   
   File: server/_core/csrf.ts
   
   Implementation:
   - Generate CSRF token on page load
   - Validate token on POST/PUT/DELETE requests

âŒ 4.3 Input Sanitization
   Install:
   ```bash
   pnpm add validator xss
   ```
   
   File: server/utils/sanitize.ts
   
   Functions:
   - sanitizeString(input)
   - sanitizeEmail(email)
   - sanitizePhone(phone)
   - sanitizeHTML(html)

âŒ 4.4 SQL Injection Prevention
   - Use Drizzle ORM (already safe)
   - Never use raw SQL with user input
   - Validate all inputs

âŒ 4.5 XSS Prevention
   - Sanitize all user inputs
   - Use Content Security Policy (CSP)
   - Escape HTML in templates

âŒ 4.6 Implement Security Headers
   Install:
   ```bash
   pnpm add helmet
   ```
   
   File: server/_core/index.ts
   
   Headers:
   - X-Content-Type-Options: nosniff
   - X-Frame-Options: DENY
   - X-XSS-Protection: 1; mode=block
   - Strict-Transport-Security
   - Content-Security-Policy
```

### Phase 5: Real-time Chat System
```
âŒ 5.1 Setup Socket.IO
   Install:
   ```bash
   pnpm add socket.io socket.io-client
   ```

âŒ 5.2 Create WebSocket Server
   File: server/_core/socket.ts
   
   Events:
   - connection
   - disconnect
   - join_room (conversationId)
   - send_message
   - typing
   - read_message

âŒ 5.3 Create Chat Backend
   File: server/chat.ts
   
   Functions:
   - createConversation(userId1, userId2)
   - getConversations(userId)
   - getMessages(conversationId)
   - sendMessage(conversationId, content, type)
   - markAsRead(messageId)

âŒ 5.4 Create Chat Components
   Files to create:
   - client/src/components/ChatList.tsx
   - client/src/components/ChatWindow.tsx
   - client/src/components/MessageBubble.tsx
   - client/src/components/ChatInput.tsx

âŒ 5.5 Create Chat Pages
   Files to create:
   - client/src/pages/Chat.tsx (main chat page)
   - client/src/pages/SupportChat.tsx (admin support)

âŒ 5.6 Integrate Socket.IO Client
   File: client/src/lib/socket.ts
   
   Setup:
   - Connect to WebSocket server
   - Handle events
   - Auto-reconnect

âŒ 5.7 Test Chat System
   Test cases:
   - Send text message
   - Send image
   - Real-time delivery
   - Typing indicator
   - Read receipts
   - Offline messages
```

### Phase 6: Shipping Integration
```
âŒ 6.1 Research Shipping APIs
   Providers:
   - Flash Express
   - Kerry Express (KEX)
   - Thailand Post (à¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œà¹„à¸—à¸¢)
   - J&T Express

âŒ 6.2 Setup API Keys
   Step 1: Register with each provider
   Step 2: Get API credentials
   Step 3: Add to environment variables

âŒ 6.3 Create Shipping Service
   File: server/shipping/index.ts
   
   Functions:
   - calculateShippingFee(from, to, weight)
   - createShipment(order, carrier)
   - getTrackingInfo(trackingNumber, carrier)
   - cancelShipment(trackingNumber, carrier)

âŒ 6.4 Create Carrier Adapters
   Files:
   - server/shipping/flash.ts
   - server/shipping/kerry.ts
   - server/shipping/thailandpost.ts
   - server/shipping/jnt.ts
   
   Each adapter implements:
   - calculateFee()
   - createShipment()
   - getTracking()
   - cancel()

âŒ 6.5 Integrate Shipping in Checkout
   File: client/src/pages/Checkout.tsx
   
   Flow:
   1. User enters shipping address
   2. System calculates fees from all carriers
   3. User selects carrier
   4. Order created with carrier info
   5. Seller prints shipping label
   6. System tracks shipment automatically

âŒ 6.6 Create Tracking Page
   File: client/src/pages/TrackOrder.tsx
   
   Features:
   - Enter tracking number
   - Show tracking timeline
   - Show current location
   - Estimated delivery date

âŒ 6.7 Auto-Update Order Status
   File: server/cron/trackShipments.ts
   
   Cron job (runs every hour):
   1. Get all "Shipped" orders
   2. Query tracking API
   3. Update order status if delivered
   4. Send email notification
```

### Phase 7: Data Seeding
```
âŒ 7.1 Create Seed Script
   File: server/seed/index.ts
   
   Data to seed:
   - 1 Admin user
   - 10 Regular users
   - 5 Sellers (approved)
   - 20 Categories
   - 100 Products (with images)
   - 50 Orders (various statuses)
   - 200 Reviews

âŒ 7.2 Generate Fake Data
   Install:
   ```bash
   pnpm add @faker-js/faker
   ```
   
   Use Faker to generate:
   - Names
   - Emails
   - Addresses
   - Phone numbers
   - Product names
   - Descriptions
   - Reviews

âŒ 7.3 Download Sample Images
   Sources:
   - Unsplash API
   - Pexels API
   - Lorem Picsum
   
   Categories:
   - Electronics
   - Fashion
   - Home & Living
   - Beauty
   - Sports
   - Books
   - Toys
   - Food

âŒ 7.4 Run Seed Script
   Command:
   ```bash
   cd /home/ubuntu/streetmarket
   node server/seed/index.mjs
   ```
   
   Verify:
   - Check database tables
   - Login as admin
   - Browse products
   - Test search

âŒ 7.5 Create Reset Script
   File: server/seed/reset.ts
   
   Function: Clear all data except schema
   
   Use case: Reset for testing
```

### Phase 8: Testing & QA
```
âŒ 8.1 User Flow Testing
   Test as Buyer:
   1. Register account
   2. Browse products
   3. Search products
   4. Add to cart
   5. Checkout
   6. Pay with PromptPay
   7. Track order
   8. Receive order
   9. Leave review
   10. Contact seller

   Test as Seller:
   1. Apply to become seller
   2. Wait for approval
   3. Add products
   4. Receive order
   5. Update order status
   6. Chat with buyer
   7. Withdraw money

   Test as Admin:
   1. Login as admin
   2. Approve seller
   3. Manage products
   4. Manage orders
   5. Resolve disputes
   6. View analytics

âŒ 8.2 Bug Tracking
   Create: bugs.md
   
   Format:
   ```markdown
   ## Bug #1: Cart not updating
   - **Severity**: High
   - **Steps to reproduce**: ...
   - **Expected**: ...
   - **Actual**: ...
   - **Status**: Open
   ```

âŒ 8.3 Fix Critical Bugs
   Priority:
   1. Payment not working
   2. Order not created
   3. Image upload failing
   4. Login issues
   5. Cart issues

âŒ 8.4 Performance Testing
   Tools:
   - Lighthouse (Chrome DevTools)
   - WebPageTest
   
   Metrics:
   - First Contentful Paint < 1.8s
   - Largest Contentful Paint < 2.5s
   - Time to Interactive < 3.8s
   - Cumulative Layout Shift < 0.1

âŒ 8.5 Security Testing
   Check:
   - SQL injection
   - XSS attacks
   - CSRF attacks
   - Rate limiting
   - Authentication bypass

âŒ 8.6 Mobile Testing
   Test on:
   - iOS Safari
   - Android Chrome
   - Various screen sizes
   
   Check:
   - Responsive layout
   - Touch interactions
   - Mobile menu
   - Image loading
```

### Phase 9: Pre-Deployment Optimization
```
âŒ 9.1 Frontend Optimization
   Tasks:
   - Code splitting (lazy loading)
   - Image optimization (WebP)
   - Minify CSS/JS
   - Remove unused code
   - Enable compression

   Commands:
   ```bash
   cd /home/ubuntu/streetmarket
   pnpm build
   ```

âŒ 9.2 Backend Optimization
   Tasks:
   - Database indexing
   - Query optimization
   - Caching (Redis)
   - API response compression
   - Connection pooling

âŒ 9.3 Database Optimization
   Add indexes:
   ```sql
   CREATE INDEX idx_products_category ON products(categoryId);
   CREATE INDEX idx_products_seller ON products(sellerId);
   CREATE INDEX idx_orders_user ON orders(userId);
   CREATE INDEX idx_orders_status ON orders(status);
   ```

âŒ 9.4 Setup CDN (Optional)
   For static assets:
   - Images
   - CSS
   - JS
   
   Providers:
   - Cloudflare
   - AWS CloudFront

âŒ 9.5 Setup Monitoring
   Tools:
   - Sentry (error tracking)
   - Google Analytics (user analytics)
   - Uptime monitoring
   
   Install:
   ```bash
   pnpm add @sentry/react @sentry/node
   ```

âŒ 9.6 Create Backup Strategy
   Schedule:
   - Database backup: Daily
   - File backup: Weekly
   - Retention: 30 days
   
   Tools:
   - Database: mysqldump
   - Files: S3 sync
```

### Phase 10: Production Deployment
```
âŒ 10.1 Pre-Deployment Checklist
   - [ ] All tests passing
   - [ ] No critical bugs
   - [ ] Environment variables set
   - [ ] Database migrated
   - [ ] SSL certificate ready
   - [ ] Domain configured
   - [ ] Backup created

âŒ 10.2 Save Final Checkpoint
   Command:
   ```
   webdev_save_checkpoint("Production Ready - v1.0.0")
   ```

âŒ 10.3 Deploy to Production
   Step 1: Click "Publish" in Management Dashboard
   Step 2: Wait for deployment
   Step 3: Verify deployment
   
   Check:
   - Website accessible
   - Database connected
   - Images loading
   - Payment working
   - Email sending

âŒ 10.4 Post-Deployment Testing
   Test:
   - Homepage loads
   - User can register
   - User can login
   - Products display
   - Search works
   - Cart works
   - Checkout works
   - Payment works
   - Email received

âŒ 10.5 Setup Custom Domain (Optional)
   Step 1: Go to Management Dashboard
   Step 2: Settings â†’ Domains
   Step 3: Add custom domain
   Step 4: Update DNS records
   Step 5: Wait for propagation

âŒ 10.6 Launch Announcement
   Channels:
   - Social media
   - Email newsletter
   - Press release
   
   Content:
   - What is StreetMarket
   - Key features
   - How to get started
   - Special launch offer
```

---

## 3.2 Common Problems & Solutions

### Problem 1: Image Upload Fails
```
Symptoms:
- Upload button not working
- Error: "Failed to upload image"

Solutions:
1. Check S3 credentials in environment variables
2. Check file size (max 5MB)
3. Check file type (JPEG, PNG, WebP, GIF only)
4. Check server logs for errors
5. Test with smaller image

Debug:
```bash
cd /home/ubuntu/streetmarket
pnpm dev
# Check terminal for errors
```
```

### Problem 2: Payment Not Verified
```
Symptoms:
- User paid but order still "Pending Payment"
- Webhook not triggered

Solutions:
1. Check webhook URL is public
2. Check payment gateway webhook settings
3. Check webhook signature verification
4. Test webhook with ngrok locally
5. Check server logs

Debug:
```bash
# Check webhook endpoint
curl -X POST https://your-domain.com/api/webhook/payment \
  -H "Content-Type: application/json" \
  -d '{"test": true}'
```
```

### Problem 3: Chat Not Working
```
Symptoms:
- Messages not sending
- Real-time updates not working

Solutions:
1. Check Socket.IO connection
2. Check WebSocket port is open
3. Check CORS settings
4. Check client-side socket connection
5. Check server logs

Debug:
```javascript
// In browser console
console.log(socket.connected) // Should be true
```
```

### Problem 4: Slow Page Load
```
Symptoms:
- Pages take > 3 seconds to load
- Images loading slowly

Solutions:
1. Enable image optimization
2. Implement lazy loading
3. Use code splitting
4. Enable compression
5. Use CDN for static assets

Optimize:
```bash
# Build for production
pnpm build

# Analyze bundle size
pnpm analyze
```
```

### Problem 5: Database Connection Error
```
Symptoms:
- Error: "Cannot connect to database"
- API returns 500 errors

Solutions:
1. Check DATABASE_URL in environment
2. Check database is running
3. Check firewall rules
4. Check connection pool settings
5. Restart server

Debug:
```bash
# Test database connection
cd /home/ubuntu/streetmarket
node -e "console.log(process.env.DATABASE_URL)"
```
```

---

## 3.3 Maintenance & Updates

### Weekly Tasks
```
- [ ] Check error logs
- [ ] Review user feedback
- [ ] Update product data
- [ ] Check payment transactions
- [ ] Backup database
```

### Monthly Tasks
```
- [ ] Update dependencies
- [ ] Security audit
- [ ] Performance review
- [ ] User analytics review
- [ ] Feature planning
```

### Quarterly Tasks
```
- [ ] Major feature release
- [ ] UI/UX improvements
- [ ] Marketing campaign
- [ ] User survey
```

---

# PART 4: DEPLOYMENT GUIDE

## 4.1 Environment Variables

### Required Variables (Already Set)
```env
# Database
DATABASE_URL=mysql://...

# Authentication
JWT_SECRET=...
OAUTH_SERVER_URL=...
VITE_OAUTH_PORTAL_URL=...

# App Info
VITE_APP_ID=...
VITE_APP_TITLE=StreetMarket
VITE_APP_LOGO=/logo.svg

# Owner
OWNER_OPEN_ID=...
OWNER_NAME=...

# Analytics
VITE_ANALYTICS_ENDPOINT=...
VITE_ANALYTICS_WEBSITE_ID=...

# Forge API (Built-in)
BUILT_IN_FORGE_API_URL=...
BUILT_IN_FORGE_API_KEY=...
VITE_FRONTEND_FORGE_API_KEY=...
VITE_FRONTEND_FORGE_API_URL=...
```

### Variables to Add
```env
# Email (Resend)
RESEND_API_KEY=re_...

# Payment (Omise)
OMISE_PUBLIC_KEY=pkey_...
OMISE_SECRET_KEY=skey_...

# Shipping (Flash Express)
FLASH_API_KEY=...
FLASH_MERCHANT_ID=...

# Shipping (Kerry)
KERRY_API_KEY=...
KERRY_MERCHANT_ID=...

# Shipping (Thailand Post)
THAILANDPOST_API_KEY=...

# Shipping (J&T)
JNT_API_KEY=...
JNT_MERCHANT_ID=...

# Monitoring (Sentry)
SENTRY_DSN=https://...
```

---

## 4.2 Deployment Checklist

### Before Deployment
```
âœ… 1. Code Review
   - All features implemented
   - No console.log statements
   - No TODO comments
   - Code formatted

âœ… 2. Testing
   - All user flows tested
   - No critical bugs
   - Performance acceptable
   - Mobile responsive

âœ… 3. Security
   - Rate limiting enabled
   - CSRF protection enabled
   - Input sanitization enabled
   - Security headers set

âœ… 4. Environment
   - All environment variables set
   - Database migrated
   - Seed data loaded (optional)

âœ… 5. Backup
   - Database backup created
   - Code committed to git
   - Checkpoint saved
```

### Deployment Steps
```
1. Save final checkpoint
   webdev_save_checkpoint("Production v1.0.0")

2. Go to Management Dashboard
   Click checkpoint card

3. Click "Publish" button
   Wait for deployment (2-5 minutes)

4. Verify deployment
   - Visit website URL
   - Test key features
   - Check error logs

5. Configure custom domain (optional)
   - Go to Settings â†’ Domains
   - Add domain
   - Update DNS records
   - Wait for SSL certificate

6. Announce launch
   - Social media
   - Email
   - Marketing
```

---

## 4.3 Post-Deployment

### Monitoring
```
1. Setup Error Tracking (Sentry)
   - Install Sentry
   - Add DSN to environment
   - Test error reporting

2. Setup Analytics (Google Analytics)
   - Create GA4 property
   - Add tracking code
   - Verify data collection

3. Setup Uptime Monitoring
   - UptimeRobot
   - Pingdom
   - StatusCake
   
   Check every 5 minutes
   Alert if down > 2 minutes
```

### Support
```
1. Create Help Center
   - FAQ page
   - How-to guides
   - Contact form

2. Setup Support Email
   - support@streetmarket.com
   - Auto-reply enabled
   - Response within 24 hours

3. Setup Support Chat
   - Admin dashboard
   - Real-time chat
   - Assign to admin
```

---

# FINAL SUMMARY

## What's Done âœ…
1. Database (14 tables)
2. Backend API (56 endpoints)
3. Frontend (10 pages)
4. Image Upload System
5. Dark Theme UI
6. Responsive Design

## What's Missing âŒ
1. Email Notification System
2. Payment Verification
3. Security (Rate limiting, CSRF)
4. Real-time Chat
5. Shipping Integration
6. Data Seeding
7. Testing & Bug Fixes
8. Optimization
9. Production Deployment

## Estimated Time to Complete
- Phase 2 (Email): 2-3 hours
- Phase 3 (Payment): 3-4 hours
- Phase 4 (Security): 2-3 hours
- Phase 5 (Chat): 4-5 hours
- Phase 6 (Shipping): 3-4 hours
- Phase 7 (Seeding): 1-2 hours
- Phase 8 (Testing): 3-4 hours
- Phase 9 (Optimization): 2-3 hours
- Phase 10 (Deployment): 1 hour

**Total: 21-29 hours**

## Next Steps for AI
1. Start with Phase 2 (Email)
2. Follow workflow step-by-step
3. Test each phase before moving to next
4. Save checkpoint after each phase
5. Don't skip any steps
6. Fix bugs immediately
7. Deploy when all phases complete

---

**END OF COMPLETE BLUEPRINT**
